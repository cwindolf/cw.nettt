function PondPoint(t,s){this.x=t,this.v=s}function Pond(t){var s=this;this.paperScope=new paper.PaperScope,this.paperScope.activate(),this.INSET=50,this.E=.2,this.$ctnr=t,this.width=Math.round(t.width()),this.height=Math.round(t.height()),this.canvas=document.createElement("canvas"),$(this.canvas).css("background-color","#006699"),this.canvas.setAttribute("id","pond"),this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this.$ctnr.append($(this.canvas)),this.context=this.canvas.getContext("2d"),paper.setup("pond"),this.ripples=[],this.pathsGroup=new paper.Group;var e=new paper.Point(this.INSET,this.INSET),i=new paper.Size(s.width-2*this.INSET,s.height-2*this.INSET);this.shore=new paper.Path.Rectangle(e,i),this.shore.visible=!1,this.render=function(){this.pathsGroup.removeChildren();for(var t=0;t<this.ripples.length;t++){var s=new paper.Path;s.strokeColor="white";for(var e=0;e<this.ripples[t].length;e++)s.add(this.ripples[t][e].x);s.closed=!0,s.strokeColor="white",s.fillColor="#dee",s.opacity=.2,s.smooth(),this.pathsGroup.addChild(s)}},this.step=function(t){for(var s=0;s<this.ripples.length;s++)for(var e,i=0;i<this.ripples[s].length;i++)e=this.ripples[s][i],this.shore.contains(e.x)||(e.x.y<=this.INSET?e.v.y+=this.E:e.x.y>=this.height-2*this.INSET&&(e.v.y-=this.E),e.x.x<=this.INSET?e.v.x+=this.E:e.x.x>=this.width-2*this.INSET&&(e.v.x-=this.E),e.v=e.v.multiply(.99)),e.x=e.x.add(e.v.multiply(t/1e3))},this.update=function(){if(s.ripples.length>0){var t=Date.now()-s.time;s.step(t),s.render(),s.time=Date.now()}},this.time=Date.now(),paper.view.on("frame",this.update),this.tool=new paper.Tool,this.tool.onMouseDown=function(t){s.time=Date.now(),s.ripples.push([]);for(var e,i=0;i<2*Math.PI;i+=Math.PI/64){e=new paper.Point(Math.cos(i),Math.sin(i));var a=new PondPoint(t.point.add(e),e.multiply(30));s.ripples[s.ripples.length-1].push(a)}}}function Model(t,s,e,i,a,h){this.t=0,this.a=t,this.b=s,this.c=e,this.d=i,this.x=a,this.y=h,this.f=function(t,s){return this.a*t-this.b*t*s},this.g=function(t,s){return this.d*t*s-this.c*s},this.step=function(t){var s=t*this.f(this.x,this.y),e=t*this.g(this.x,this.y),i=t*this.f(this.x+s/2,this.y+e/2),a=t*this.g(this.x+s/2,this.y+e/2),h=t*this.f(this.x+i/2,this.y+a/2),r=t*this.g(this.x+i/2,this.y+a/2),n=t*this.f(this.x+h,this.y+r),o=t*this.g(this.x+h,this.y+r),c=(s+2*i+2*h+n)/6,l=(e+2*a+2*r+o)/6;this.t+=t,this.x+=c,this.y+=l,this.x>1&&(this.x=1),this.y>1&&(this.y=1)}}function hslToRgb(t,s,e){var i,a,h;if(0==s)i=a=h=e;else{var r=function(t,s,e){return 0>e&&(e+=1),e>1&&(e-=1),1/6>e?t+6*(s-t)*e:.5>e?s:2/3>e?t+(s-t)*(2/3-e)*6:t},n=.5>e?e*(1+s):e+s-e*s,o=2*e-n;i=r(o,n,t+1/3),a=r(o,n,t),h=r(o,n,t-1/3)}var c=Math.round(255*i).toString(16),l=Math.round(255*a).toString(16),d=Math.round(255*h).toString(16);return c=c.length>1?c:"0"+c,l=l.length>1?l:"0"+l,d=d.length>1?d:"0"+d,"#"+c+l+d}function Window(t,s,e,i,a){this.title=t,this.content=s,this.id=Date.now(),this.width=i,this.height=a,this.close=e,this.onClose=null,this.html="<div class='dragme' data-window-id='"+this.id+"'><div class='handle'>"+this.title+(e?"<p class='x'>&times;</p>":"")+"</div><div class='content'>"+this.content+"</div></div>",this.display=function(t,s,e){t.append(this.html);var i=$(".dragme[data-window-id='"+this.id+"']");if(i.css("top",e),i.css("left",s),i.css("width",this.width),i.css("height",this.height),$(".dragme").not(i).css("z-index",9),i.css("z-index",10),this.close){var a=this;$(".dragme[data-window-id='"+this.id+"'] p.x").click(function(){a.destroy()})}i.draggable({handle:".handle"}),i.mousedown(function(){$(".dragme").not(i).css("z-index",9),i.css("z-index",10)})},this.destroy=function(){console.log(this.onClose),this.onClose&&(console.log("close callback"),this.onClose.call()),$(".dragme[data-window-id='"+this.id+"']").remove()},this.button=function(t,s){$(".dragme[data-window-id='"+this.id+"'] .handle").append("<span class='button noselect'>"+t+"</span>");var e=$(".dragme[data-window-id='"+this.id+"'] .handle").children(".button").last();e.click(s)},this.desc=function(t){$(".dragme[data-window-id='"+this.id+"'] .handle").append("<span class='desc noselect'>"+t+"</span>")},this.jqObj=function(){return $(".dragme[data-window-id='"+this.id+"']")}}function SWE(t,s,e,i,a,h){function r(t,s){return[t[0]+s[0],t[1]+s[1],t[2]+s[2]]}function n(t,s){return[t[0]-s[0],t[1]-s[1],t[2]-s[2]]}function o(t,s){return[t*s[0],t*s[1],t*s[2]]}if(this.QUANT=t||100,this.LENGTH=s||10,this.dd=this.LENGTH/this.QUANT,this.delegate,void 0==e){console.log("create n"),e=[];for(var c=0;t>c;c++){e.push([]);for(var l=0;t>l;l++)e[c].push(20)}}void 0==i&&(i=e.map(function(t){return t.map(function(){return 0})})),void 0==a&&(a=e.map(function(t){return t.map(function(){return 0})})),this.U=[];for(var d,u=0;t>u;u++){this.U.push([]);for(var p=0;t>p;p++)d=e[u][p],this.U[u].push([d,d*i[u][p],d*a[u][p]])}this.g=h||10,this.heightAt=function(t,s){return this.U[t][s][0]},this.F=function(t){var s=t[0],e=t[1]/s;return[t[1],t[1]*e+this.g*s*s*.5,t[2]*e]},this.G=function(t){var s=t[0],e=t[2]/s;return[t[2],t[1]*e,t[2]*e+this.g*s*s*.5]},this.step=function(t){for(var s,e,i=.5*t/this.dd,a=[],h=0;h<this.QUANT+1;h++){a.push([]);for(var c=0;c<this.QUANT;c++)0==h?(s=this.U[h][c],e=s):h==this.QUANT?(s=this.U[h-1][c],e=s):(s=this.U[h-1][c],e=this.U[h][c]),a[h][c]=n(o(.5,r(e,s)),o(i,n(this.F(e),this.F(s))))}for(var l,d,u=[],p=0;p<this.QUANT;p++){u.push([]);for(var f=0;f<this.QUANT+1;f++)0==f?(d=this.U[p][f],l=d):f==this.QUANT?(l=this.U[p][f-1],d=l):(l=this.U[p][f-1],d=this.U[p][f]),u[p][f]=n(o(.5,r(d,l)),o(i,n(this.G(d),this.G(l))))}for(var m=2*i,g=[],v=0;v<this.QUANT;v++){g.push([]);for(var y=0;y<this.QUANT;y++)g[v].push(n(this.U[v][y],o(m,r(n(this.F(a[v+1][y]),this.F(a[v][y])),n(this.G(u[v][y+1]),this.G(u[v][y])))))),this.delegate&&g[v][y][0]!=this.U[v][y][0]&&this.delegate.updateHeightAt(v,y,g[v][y][0])}return this.U=g,!0},this.addtoU=function(t,s,e){this.U[s][e][1]=this.U[s][e][1]/this.U[s][e][0],this.U[s][e][2]=this.U[s][e][2]/this.U[s][e][0],this.U[s][e][0]+=t,this.U[s][e][1]*=this.U[s][e][0],this.U[s][e][2]*=this.U[s][e][0];for(var i=0;3>i;i++)console.assert(isFinite(this.U[s][e][i]))};var f=function(t,s,e,i){return 100*Math.exp(-.008*((t-e)*(t-e)+(s-i)*(s-i)))};this.plip=function(t,s){console.log("PLIP",t,s);for(var e,i=0;i<this.QUANT;i++)for(var a=0;a<this.QUANT;a++)e=f(i,a,t,s),this.addtoU(e,i,a);return!0},this.randomize=function(){this.U=this.U.map(function(t){return t.map(function(t){return t.map(function(){return 40*Math.random()})})})}}function CanvasBathtub(t){var s=250;this.width=750,this.height=750,this.canvas=document.createElement("canvas"),this.canvas.setAttribute("id","conway"),this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),t.append($(this.canvas)),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.id=void 0;var e=new SWE(s,this.width);console.log(e);var i,a,h=this,r=Date.now();window.AudioContext=window.AudioContext||window.webkitAudioContext,this.acontext=new AudioContext,$(this.canvas).click(function(t){var s=Math.floor(Math.floor(t.pageX-$(h.canvas).offset().left)/e.dd),i=Math.floor(Math.floor(t.pageY-$(h.canvas).offset().top)/e.dd);clearInterval(this.id),e.plip(s,i),r=Date.now()-1,h.loop()}),this.update=function(){console.log("refresh!");for(var t,i=0;s>i;i++)for(var a=0;s>a;a++){t=e.heightAt(i,a);var h=255-Math.round(t)%256;this.context.fillStyle="rgb("+h+","+h+",255)",this.context.fillRect(e.dd*i,e.dd*a,e.dd,e.dd)}},e.delegate=this,this.updateHeightAt=function(t,s,i){var a=(console.assert(isFinite(i)),255-Math.round(i)%256);this.context.fillStyle="rgb("+a+","+a+",255)",isFinite(i)||(console.log("bimmer at",t,s,i),console.log("color was",this.context.fillStyle),this.context.fillStyle="#000"),this.context.fillRect(e.dd*t,e.dd*s,e.dd,e.dd)},this.loop=function(){this.id=setInterval(function(){i=Date.now(),a=i-r,e.step(a/1e4),r=i},1)},this.cleanup=function(){clearInterval(h.id)},this.update()}function Conway(t){var s=this;this.state=[],this.width=Math.round(t.width()),this.height=Math.round(t.height()),this.loopid=null;for(var e=0;e<this.width;e++){this.state.push([]);for(var i=0;i<this.height;i++)this.state[e].push(!1)}this.$container=t,this.canvas=document.createElement("canvas"),this.canvas.setAttribute("id","conway"),this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this.$container.append($(this.canvas)),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.toImage=function(){for(var t=this.context.createImageData(this.width,this.height),s=0;s<this.width;s++)for(var e=0;e<this.height;e++)this.state[s][e]?(t.data[4*s+4*this.width*e]=0,t.data[4*s+4*this.width*e+1]=0,t.data[4*s+4*this.width*e+2]=0,t.data[4*s+4*this.width*e+3]=255):(t.data[4*s+4*this.width*e+1]=255,t.data[4*s+4*this.width*e+2]=255,t.data[4*s+4*this.width*e+3]=255,t.data[4*s+4*this.width*e]=255);return t},this.loop=function(){var t=this;this.loopid=setInterval(function(){console.log("looping"),t.context.putImageData(t.toImage(),0,0),t.next()},100)},this.destroy=function(){clearInterval(s.loopid)},this.clear=function(){for(var t=0;t<this.width;t++)for(var s=0;s<this.height;s++)this.state[t][s]=!1},this.randomSeed=function(){for(var t=0;t<this.width;t++)for(var s=0;s<this.height;s++)this.state[t][s]=Math.random()<.5},this.randomSeed(),this.count=function(){for(var t=0,s=0;s<this.width;s++)for(var e=0;e<this.height;e++)this.state[s][e]&&t++;return t},this.next=function(){for(var t=new Array(this.width),s=0;s<this.width;s++)t[s]=new Array(this.height);for(var s=0;s<this.width;s++)for(var e=0;e<this.height;e++)t[s][e]=this.lives(s,e);return this.state=t,this.state},this.lives=function(t,s){var e=this.neighbors(t,s);return this.state[t][s]?e>1&&4>e:3==e},this.neighbors=function(t,s){var e=0;if(t>0&&t<this.width-1&&s>0&&s<this.height)for(var i=-1;1>=i;i++)for(var a=-1;1>=a;a++)0==i&&0==a||!this.state[t+i][s+a]||e++;else 0==t&&0==s?(this.state[t][s+1]&&e++,this.state[t+1][s]&&e++,this.state[t+1][s+1]&&e++):0==t&&s==this.height-1?(this.state[t][s-1]&&e++,this.state[t+1][s-1]&&e++,this.state[t+1][s]&&e++):t==this.width-1&&0==s?(this.state[t-1][s]&&e++,this.state[t-1][s+1]&&e++,this.state[t][s+1]&&e++):t==this.width-1&&s==this.height-1?(this.state[t][s-1]&&e++,this.state[t-1][s]&&e++,this.state[t-1][s-1]&&e++):0==t?(this.state[t][s+1]&&e++,this.state[t][s-1]&&e++,this.state[t+1][s+1]&&e++,this.state[t+1][s-1]&&e++,this.state[t+1][s]&&e++):t==this.width-1?(this.state[t][s+1]&&e++,this.state[t][s-1]&&e++,this.state[t-1][s+1]&&e++,this.state[t-1][s-1]&&e++,this.state[t-1][s]&&e++):0==s?(this.state[t+1][s]&&e++,this.state[t-1][s]&&e++,this.state[t+1][s+1]&&e++,this.state[t-1][s+1]&&e++,this.state[t][s+1]&&e++):s==this.height-1&&(this.state[t+1][s]&&e++,this.state[t-1][s]&&e++,this.state[t+1][s-1]&&e++,this.state[t-1][s-1]&&e++,this.state[t][s-1]&&e++);return e},this.toString=function(){for(var t="",s=0;s<this.height;s++){for(var e=0;e<this.width;e++)t+=this.state[e][s]?"+ ":"  ";t+="\n"}return t},this.glider=function(){console.log("glider: "+this);var t=Math.floor(Math.random()*(.8*this.width+1)+.1*this.width),s=Math.floor(Math.random()*(.8*this.height+1)+.1*this.height);this.state[t][s+1]=!0,this.state[t-1][s]=!0,this.state[t-1][s-1]=!0,this.state[t][s-1]=!0,this.state[t+1][s-1]=!0},this.gliderGun=function(){var t=Math.floor(Math.random()*(.8*this.width+1)+.1*this.width),s=Math.floor(Math.random()*(.8*this.height+1)+.1*this.height);this.state[t+6][s+-4]=!0,this.state[t+4][s+-3]=!0,this.state[t+6][s+-3]=!0,this.state[t+-6][s+-2]=!0,this.state[t+-5][s+-2]=!0,this.state[t+2][s+-2]=!0,this.state[t+3][s+-2]=!0,this.state[t+16][s+-2]=!0,this.state[t+17][s+-2]=!0,this.state[t+-7][s+-1]=!0,this.state[t+-3][s+-1]=!0,this.state[t+2][s+-1]=!0,this.state[t+3][s+-1]=!0,this.state[t+16][s+-1]=!0,this.state[t+17][s+-1]=!0,this.state[t+-18][s+0]=!0,this.state[t+-17][s+0]=!0,this.state[t+-8][s+0]=!0,this.state[t+-2][s+0]=!0,this.state[t+2][s+0]=!0,this.state[t+3][s+0]=!0,this.state[t+-18][s+1]=!0,this.state[t+-17][s+1]=!0,this.state[t+-8][s+1]=!0,this.state[t+-4][s+1]=!0,this.state[t+-2][s+1]=!0,this.state[t+-1][s+1]=!0,this.state[t+4][s+1]=!0,this.state[t+6][s+1]=!0,this.state[t+-8][s+2]=!0,this.state[t+-2][s+2]=!0,this.state[t+6][s+2]=!0,this.state[t+-7][s+3]=!0,this.state[t+-3][s+3]=!0,this.state[t+-6][s+4]=!0,this.state[t+-5][s+4]=!0},this.puffer=function(){var t=Math.floor(Math.random()*(.7*this.width+1)+.15*this.width),s=Math.floor(Math.random()*(.8*this.height+1)+.1*this.height);this.state[t+0][s+43]=!0,this.state[t+1][s+41]=!0,this.state[t+1][s+43]=!0,this.state[t+2][s+42]=!0,this.state[t+2][s+43]=!0,this.state[t+3][s+84]=!0,this.state[t+4][s+82]=!0,this.state[t+4][s+83]=!0,this.state[t+5][s+83]=!0,this.state[t+5][s+84]=!0,this.state[t+10][s+58]=!0,this.state[t+10][s+59]=!0,this.state[t+11][s+57]=!0,this.state[t+11][s+59]=!0,this.state[t+12][s+46]=!0,this.state[t+12][s+47]=!0,this.state[t+12][s+57]=!0,this.state[t+12][s+58]=!0,this.state[t+12][s+68]=!0,this.state[t+12][s+69]=!0,this.state[t+13][s+46]=!0,this.state[t+13][s+47]=!0,this.state[t+13][s+68]=!0,this.state[t+13][s+70]=!0,this.state[t+14][s+69]=!0,this.state[t+14][s+70]=!0,this.state[t+14][s+80]=!0,this.state[t+14][s+81]=!0,this.state[t+15][s+28]=!0,this.state[t+15][s+80]=!0,this.state[t+15][s+81]=!0,this.state[t+16][s+26]=!0,this.state[t+16][s+28]=!0,this.state[t+17][s+15]=!0,this.state[t+17][s+17]=!0,this.state[t+17][s+27]=!0,this.state[t+17][s+28]=!0,this.state[t+18][s+14]=!0,this.state[t+18][s+99]=!0,this.state[t+19][s+14]=!0,this.state[t+19][s+18]=!0,this.state[t+19][s+97]=!0,this.state[t+19][s+98]=!0,this.state[t+20][s+14]=!0,this.state[t+20][s+98]=!0,this.state[t+20][s+99]=!0,this.state[t+21][s+14]=!0,this.state[t+21][s+17]=!0,this.state[t+21][s+110]=!0,this.state[t+21][s+112]=!0,this.state[t+22][s+14]=!0,this.state[t+22][s+15]=!0,this.state[t+22][s+16]=!0,this.state[t+22][s+113]=!0,this.state[t+23][s+109]=!0,this.state[t+23][s+113]=!0,this.state[t+24][s+113]=!0,this.state[t+25][s+18]=!0,this.state[t+25][s+110]=!0,this.state[t+25][s+113]=!0,this.state[t+26][s+16]=!0,this.state[t+26][s+18]=!0,this.state[t+26][s+22]=!0,this.state[t+26][s+111]=!0,this.state[t+26][s+112]=!0,this.state[t+26][s+113]=!0,this.state[t+27][s+17]=!0,this.state[t+27][s+18]=!0,this.state[t+27][s+22]=!0,this.state[t+28][s+43]=!0,this.state[t+28][s+109]=!0,this.state[t+29][s+43]=!0,this.state[t+29][s+44]=!0,this.state[t+29][s+107]=!0,this.state[t+29][s+108]=!0,this.state[t+30][s+13]=!0,this.state[t+30][s+43]=!0,this.state[t+30][s+44]=!0,this.state[t+30][s+45]=!0,this.state[t+30][s+84]=!0,this.state[t+30][s+108]=!0,this.state[t+30][s+109]=!0,this.state[t+31][s+11]=!0,this.state[t+31][s+13]=!0,this.state[t+31][s+19]=!0,this.state[t+31][s+20]=!0,this.state[t+31][s+24]=!0,this.state[t+31][s+25]=!0,this.state[t+31][s+37]=!0,this.state[t+31][s+45]=!0,this.state[t+31][s+46]=!0,this.state[t+31][s+83]=!0,this.state[t+31][s+84]=!0,this.state[t+32][s+12]=!0,this.state[t+32][s+13]=!0,this.state[t+32][s+36]=!0,this.state[t+32][s+37]=!0,this.state[t+32][s+38]=!0,this.state[t+32][s+40]=!0,this.state[t+32][s+44]=!0,this.state[t+32][s+45]=!0,this.state[t+32][s+82]=!0,this.state[t+32][s+83]=!0,this.state[t+32][s+84]=!0,this.state[t+33][s+35]=!0,this.state[t+33][s+36]=!0,this.state[t+33][s+38]=!0,this.state[t+33][s+39]=!0,this.state[t+33][s+40]=!0,this.state[t+33][s+41]=!0,this.state[t+33][s+43]=!0,this.state[t+33][s+44]=!0,this.state[t+33][s+57]=!0,this.state[t+33][s+58]=!0,this.state[t+33][s+81]=!0,this.state[t+33][s+82]=!0,this.state[t+33][s+90]=!0,this.state[t+33][s+114]=!0,this.state[t+34][s+22]=!0,this.state[t+34][s+29]=!0,this.state[t+34][s+30]=!0,this.state[t+34][s+36]=!0,this.state[t+34][s+38]=!0,this.state[t+34][s+39]=!0,this.state[t+34][s+41]=!0,this.state[t+34][s+42]=!0,this.state[t+34][s+56]=!0,this.state[t+34][s+59]=!0,this.state[t+34][s+82]=!0,this.state[t+34][s+83]=!0,this.state[t+34][s+87]=!0,this.state[t+34][s+89]=!0,this.state[t+34][s+90]=!0,this.state[t+34][s+91]=!0,this.state[t+34][s+112]=!0,this.state[t+34][s+113]=!0,this.state[t+35][s+8]=!0,this.state[t+35][s+21]=!0,this.state[t+35][s+23]=!0,this.state[t+35][s+28]=!0,this.state[t+35][s+29]=!0,this.state[t+35][s+30]=!0,this.state[t+35][s+37]=!0,this.state[t+35][s+38]=!0,this.state[t+35][s+39]=!0,this.state[t+35][s+41]=!0,this.state[t+35][s+46]=!0,this.state[t+35][s+57]=!0,this.state[t+35][s+58]=!0,this.state[t+35][s+69]=!0,this.state[t+35][s+70]=!0,this.state[t+35][s+83]=!0,this.state[t+35][s+84]=!0,this.state[t+35][s+86]=!0,this.state[t+35][s+87]=!0,this.state[t+35][s+88]=!0,this.state[t+35][s+89]=!0,this.state[t+35][s+91]=!0,this.state[t+35][s+92]=!0,this.state[t+35][s+105]=!0,this.state[t+35][s+113]=!0,this.state[t+35][s+114]=!0,this.state[t+36][s+6]=!0,this.state[t+36][s+8]=!0,this.state[t+36][s+21]=!0,this.state[t+36][s+23]=!0,this.state[t+36][s+28]=!0,this.state[t+36][s+29]=!0,this.state[t+36][s+31]=!0,this.state[t+36][s+38]=!0,this.state[t+36][s+39]=!0,this.state[t+36][s+45]=!0,this.state[t+36][s+47]=!0,this.state[t+36][s+68]=!0,this.state[t+36][s+71]=!0,this.state[t+36][s+85]=!0,this.state[t+36][s+86]=!0,this.state[t+36][s+88]=!0,this.state[t+36][s+89]=!0,this.state[t+36][s+91]=!0,this.state[t+36][s+97]=!0,this.state[t+36][s+98]=!0,this.state[t+36][s+104]=!0,this.state[t+36][s+105]=!0,this.state[t+36][s+106]=!0,this.state[t+37][s+7]=!0,this.state[t+37][s+8]=!0,this.state[t+37][s+22]=!0,this.state[t+37][s+29]=!0,this.state[t+37][s+30]=!0,this.state[t+37][s+31]=!0,this.state[t+37][s+45]=!0,this.state[t+37][s+47]=!0,this.state[t+37][s+48]=!0,this.state[t+37][s+69]=!0,this.state[t+37][s+70]=!0,this.state[t+37][s+81]=!0,this.state[t+37][s+86]=!0,this.state[t+37][s+88]=!0,this.state[t+37][s+89]=!0,this.state[t+37][s+90]=!0,this.state[t+37][s+97]=!0,this.state[t+37][s+98]=!0,this.state[t+37][s+99]=!0,this.state[t+37][s+104]=!0,this.state[t+37][s+105]=!0,this.state[t+37][s+106]=!0,this.state[t+38][s+22]=!0,this.state[t+38][s+30]=!0,this.state[t+38][s+46]=!0,this.state[t+38][s+47]=!0,this.state[t+38][s+80]=!0,this.state[t+38][s+82]=!0,this.state[t+38][s+88]=!0,this.state[t+38][s+89]=!0,this.state[t+38][s+96]=!0,this.state[t+38][s+98]=!0,this.state[t+38][s+99]=!0,this.state[t+38][s+102]=!0,this.state[t+38][s+104]=!0,this.state[t+38][s+106]=!0,this.state[t+38][s+108]=!0,this.state[t+38][s+119]=!0,this.state[t+39][s+21]=!0,this.state[t+39][s+23]=!0,this.state[t+39][s+79]=!0,this.state[t+39][s+80]=!0,this.state[t+39][s+82]=!0,this.state[t+39][s+96]=!0,this.state[t+39][s+97]=!0,this.state[t+39][s+98]=!0,this.state[t+39][s+103]=!0,this.state[t+39][s+107]=!0,this.state[t+39][s+117]=!0,this.state[t+39][s+118]=!0,this.state[t+40][s+20]=!0,this.state[t+40][s+24]=!0,this.state[t+40][s+58]=!0,this.state[t+40][s+59]=!0,this.state[t+40][s+80]=!0,this.state[t+40][s+81]=!0,this.state[t+40][s+97]=!0,this.state[t+40][s+103]=!0,this.state[t+40][s+107]=!0,this.state[t+40][s+118]=!0,this.state[t+40][s+119]=!0,this.state[t+41][s+21]=!0,this.state[t+41][s+23]=!0,this.state[t+41][s+41]=!0,this.state[t+41][s+47]=!0,this.state[t+41][s+57]=!0,this.state[t+41][s+59]=!0,this.state[t+42][s+1]=!0,this.state[t+42][s+3]=!0,this.state[t+42][s+22]=!0,this.state[t+42][s+41]=!0,this.state[t+42][s+42]=!0,this.state[t+42][s+47]=!0,this.state[t+42][s+57]=!0,this.state[t+42][s+58]=!0,this.state[t+42][s+68]=!0,this.state[t+42][s+69]=!0,this.state[t+43][s+0]=!0,this.state[t+43][s+40]=!0,this.state[t+43][s+42]=!0,this.state[t+43][s+47]=!0,this.state[t+43][s+68]=!0,this.state[t+43][s+70]=!0,this.state[t+43][s+80]=!0,this.state[t+43][s+86]=!0,this.state[t+44][s+0]=!0,this.state[t+44][s+19]=!0,this.state[t+44][s+20]=!0,this.state[t+44][s+24]=!0,this.state[t+44][s+25]=!0,this.state[t+44][s+69]=!0,this.state[t+44][s+70]=!0,this.state[t+44][s+80]=!0,this.state[t+44][s+85]=!0,this.state[t+44][s+86]=!0,this.state[t+44][s+104]=!0,this.state[t+44][s+105]=!0,this.state[t+44][s+106]=!0,this.state[t+45][s+0]=!0,this.state[t+45][s+3]=!0,this.state[t+45][s+10]=!0,this.state[t+45][s+11]=!0,this.state[t+45][s+12]=!0,this.state[t+45][s+19]=!0,this.state[t+45][s+20]=!0,this.state[t+45][s+21]=!0,this.state[t+45][s+23]=!0,this.state[t+45][s+24]=!0,this.state[t+45][s+25]=!0,this.state[t+45][s+46]=!0,this.state[t+45][s+48]=!0,this.state[t+45][s+80]=!0,this.state[t+45][s+85]=!0,this.state[t+45][s+87]=!0,this.state[t+45][s+104]=!0,this.state[t+45][s+105]=!0,this.state[t+45][s+106]=!0,this.state[t+46][s+0]=!0,this.state[t+46][s+1]=!0,this.state[t+46][s+2]=!0,this.state[t+46][s+10]=!0,this.state[t+46][s+11]=!0,this.state[t+46][s+12]=!0,this.state[t+46][s+18]=!0,this.state[t+46][s+20]=!0,this.state[t+46][s+21]=!0,this.state[t+46][s+23]=!0,this.state[t+46][s+24]=!0,this.state[t+46][s+26]=!0,this.state[t+46][s+45]=!0,this.state[t+46][s+46]=!0,this.state[t+46][s+48]=!0,this.state[t+46][s+49]=!0,this.state[t+46][s+105]=!0,this.state[t+46][s+116]=!0,this.state[t+46][s+117]=!0,this.state[t+47][s+9]=!0,this.state[t+47][s+12]=!0,this.state[t+47][s+13]=!0,this.state[t+47][s+18]=!0,this.state[t+47][s+19]=!0,this.state[t+47][s+20]=!0,this.state[t+47][s+24]=!0,this.state[t+47][s+25]=!0,this.state[t+47][s+26]=!0,this.state[t+47][s+45]=!0,this.state[t+47][s+49]=!0,this.state[t+47][s+79]=!0,this.state[t+47][s+81]=!0,this.state[t+47][s+115]=!0,this.state[t+47][s+116]=!0,this.state[t+47][s+118]=!0,this.state[t+47][s+119]=!0,this.state[t+47][s+126]=!0,this.state[t+47][s+127]=!0,this.state[t+48][s+9]=!0,this.state[t+48][s+12]=!0,this.state[t+48][s+13]=!0,this.state[t+48][s+19]=!0,this.state[t+48][s+25]=!0,this.state[t+48][s+78]=!0,this.state[t+48][s+79]=!0,this.state[t+48][s+81]=!0,this.state[t+48][s+82]=!0,this.state[t+48][s+102]=!0,this.state[t+48][s+104]=!0,this.state[t+48][s+106]=!0,this.state[t+48][s+108]=!0,this.state[t+48][s+115]=!0,this.state[t+48][s+116]=!0,this.state[t+48][s+118]=!0,this.state[t+48][s+119]=!0,this.state[t+48][s+126]=!0,this.state[t+48][s+127]=!0,this.state[t+48][s+128]=!0,this.state[t+49][s+12]=!0,this.state[t+49][s+78]=!0,this.state[t+49][s+82]=!0,this.state[t+49][s+101]=!0,this.state[t+49][s+109]=!0,this.state[t+49][s+115]=!0,this.state[t+49][s+116]=!0,this.state[t+49][s+118]=!0,this.state[t+49][s+119]=!0,this.state[t+49][s+125]=!0,this.state[t+49][s+127]=!0,this.state[t+49][s+128]=!0,this.state[t+50][s+8]=!0,this.state[t+50][s+47]=!0,this.state[t+50][s+101]=!0,this.state[t+50][s+109]=!0,this.state[t+50][s+117]=!0,this.state[t+50][s+125]=!0,this.state[t+50][s+126]=!0,this.state[t+50][s+127]=!0,this.state[t+51][s+8]=!0,this.state[t+51][s+11]=!0,this.state[t+51][s+16]=!0,this.state[t+51][s+17]=!0,this.state[t+51][s+47]=!0,this.state[t+51][s+101]=!0,this.state[t+51][s+104]=!0,this.state[t+51][s+106]=!0,this.state[t+51][s+109]=!0,this.state[t+51][s+126]=!0,this.state[t+52][s+8]=!0,this.state[t+52][s+10]=!0,this.state[t+52][s+15]=!0,this.state[t+52][s+16]=!0,this.state[t+52][s+17]=!0,this.state[t+52][s+46]=!0,this.state[t+52][s+48]=!0,this.state[t+52][s+80]=!0,this.state[t+52][s+101]=!0,this.state[t+52][s+102]=!0,this.state[t+52][s+103]=!0,this.state[t+52][s+107]=!0,this.state[t+52][s+108]=!0,this.state[t+52][s+109]=!0,this.state[t+53][s+9]=!0,this.state[t+53][s+10]=!0,this.state[t+53][s+15]=!0,this.state[t+53][s+16]=!0,this.state[t+53][s+18]=!0,this.state[t+53][s+46]=!0,this.state[t+53][s+47]=!0,this.state[t+53][s+48]=!0,this.state[t+53][s+80]=!0,this.state[t+53][s+119]=!0,this.state[t+53][s+120]=!0,this.state[t+54][s+8]=!0,this.state[t+54][s+9]=!0,this.state[t+54][s+10]=!0,this.state[t+54][s+16]=!0,this.state[t+54][s+17]=!0,this.state[t+54][s+18]=!0,this.state[t+54][s+46]=!0,this.state[t+54][s+47]=!0,this.state[t+54][s+48]=!0,this.state[t+54][s+79]=!0,this.state[t+54][s+81]=!0,this.state[t+54][s+119]=!0,this.state[t+54][s+120]=!0,this.state[t+55][s+8]=!0,this.state[t+55][s+9]=!0,this.state[t+55][s+10]=!0,this.state[t+55][s+17]=!0,this.state[t+55][s+79]=!0,this.state[t+55][s+80]=!0,this.state[t+55][s+81]=!0,this.state[t+55][s+110]=!0,this.state[t+55][s+112]=!0,this.state[t+56][s+7]=!0,this.state[t+56][s+9]=!0,this.state[t+56][s+10]=!0,this.state[t+56][s+36]=!0,this.state[t+56][s+42]=!0,this.state[t+56][s+44]=!0,this.state[t+56][s+50]=!0,this.state[t+56][s+52]=!0,this.state[t+56][s+79]=!0,this.state[t+56][s+80]=!0,this.state[t+56][s+81]=!0,this.state[t+56][s+109]=!0,this.state[t+57][s+11]=!0,this.state[t+57][s+36]=!0,this.state[t+57][s+37]=!0,this.state[t+57][s+45]=!0,this.state[t+57][s+49]=!0,this.state[t+57][s+109]=!0,this.state[t+58][s+7]=!0,this.state[t+58][s+9]=!0,this.state[t+58][s+12]=!0,this.state[t+58][s+13]=!0,this.state[t+58][s+35]=!0,this.state[t+58][s+37]=!0,this.state[t+58][s+45]=!0,this.state[t+58][s+49]=!0,this.state[t+58][s+75]=!0,this.state[t+58][s+77]=!0,this.state[t+58][s+83]=!0,this.state[t+58][s+85]=!0,this.state[t+58][s+91]=!0,this.state[t+58][s+109]=!0,this.state[t+58][s+112]=!0,this.state[t+59][s+1]=!0,this.state[t+59][s+3]=!0,this.state[t+59][s+8]=!0,this.state[t+59][s+12]=!0,this.state[t+59][s+15]=!0,this.state[t+59][s+17]=!0,this.state[t+59][s+42]=!0,this.state[t+59][s+45]=!0,this.state[t+59][s+49]=!0,this.state[t+59][s+52]=!0,this.state[t+59][s+78]=!0,this.state[t+59][s+82]=!0,this.state[t+59][s+90]=!0,this.state[t+59][s+91]=!0,this.state[t+59][s+109]=!0,this.state[t+59][s+110]=!0,this.state[t+59][s+111]=!0,this.state[t+60][s+4]=!0,this.state[t+60][s+9]=!0,this.state[t+60][s+12]=!0,this.state[t+60][s+18]=!0,this.state[t+60][s+43]=!0,this.state[t+60][s+44]=!0,this.state[t+60][s+45]=!0,this.state[t+60][s+49]=!0,this.state[t+60][s+50]=!0,this.state[t+60][s+51]=!0,this.state[t+60][s+78]=!0,this.state[t+60][s+82]=!0,this.state[t+60][s+90]=!0,this.state[t+60][s+92]=!0,this.state[t+61][s+4]=!0,this.state[t+61][s+9]=!0,this.state[t+61][s+10]=!0,this.state[t+61][s+11]=!0,this.state[t+61][s+18]=!0,this.state[t+61][s+75]=!0,this.state[t+61][s+78]=!0,this.state[t+61][s+82]=!0,this.state[t+61][s+85]=!0,this.state[t+62][s+1]=!0,this.state[t+62][s+4]=!0,this.state[t+62][s+15]=!0,this.state[t+62][s+18]=!0,this.state[t+62][s+76]=!0,this.state[t+62][s+77]=!0,this.state[t+62][s+78]=!0,this.state[t+62][s+82]=!0,this.state[t+62][s+83]=!0,this.state[t+62][s+84]=!0,this.state[t+63][s+2]=!0,this.state[t+63][s+3]=!0,this.state[t+63][s+4]=!0,this.state[t+63][s+16]=!0,this.state[t+63][s+17]=!0,this.state[t+63][s+18]=!0,this.state[t+63][s+39]=!0,this.state[t+63][s+41]=!0,this.state[t+63][s+58]=!0,this.state[t+63][s+115]=!0,this.state[t+63][s+116]=!0,this.state[t+63][s+117]=!0,this.state[t+64][s+38]=!0,this.state[t+64][s+58]=!0,this.state[t+64][s+109]=!0,this.state[t+64][s+110]=!0,this.state[t+64][s+115]=!0,this.state[t+64][s+118]=!0,this.state[t+64][s+119]=!0,this.state[t+64][s+123]=!0,this.state[t+64][s+124]=!0,this.state[t+65][s+38]=!0,this.state[t+65][s+58]=!0,this.state[t+65][s+69]=!0,this.state[t+65][s+86]=!0,this.state[t+65][s+88]=!0,this.state[t+65][s+108]=!0,this.state[t+65][s+109]=!0,this.state[t+65][s+110]=!0,this.state[t+65][s+116]=!0,this.state[t+65][s+117]=!0,this.state[t+65][s+118]=!0,this.state[t+65][s+122]=!0,this.state[t+65][s+123]=!0,this.state[t+65][s+124]=!0,this.state[t+66][s+38]=!0,this.state[t+66][s+41]=!0,this.state[t+66][s+49]=!0,this.state[t+66][s+50]=!0,this.state[t+66][s+69]=!0,this.state[t+66][s+89]=!0,this.state[t+66][s+108]=!0,this.state[t+66][s+109]=!0,this.state[t+66][s+111]=!0,this.state[t+66][s+117]=!0,this.state[t+66][s+122]=!0,this.state[t+66][s+123]=!0,this.state[t+66][s+125]=!0,this.state[t+67][s+28]=!0,this.state[t+67][s+29]=!0,this.state[t+67][s+30]=!0,this.state[t+67][s+38]=!0,this.state[t+67][s+39]=!0,this.state[t+67][s+40]=!0,this.state[t+67][s+48]=!0,this.state[t+67][s+49]=!0,this.state[t+67][s+50]=!0,this.state[t+67][s+69]=!0,this.state[t+67][s+89]=!0,this.state[t+67][s+109]=!0,this.state[t+67][s+110]=!0,this.state[t+67][s+111]=!0,this.state[t+67][s+123]=!0,this.state[t+67][s+124]=!0,this.state[t+67][s+125]=!0,this.state[t+68][s+28]=!0,this.state[t+68][s+29]=!0,this.state[t+68][s+30]=!0,this.state[t+68][s+48]=!0,this.state[t+68][s+49]=!0,this.state[t+68][s+50]=!0,this.state[t+68][s+56]=!0,this.state[t+68][s+57]=!0,this.state[t+68][s+77]=!0,this.state[t+68][s+78]=!0,this.state[t+68][s+86]=!0,this.state[t+68][s+89]=!0,this.state[t+68][s+110]=!0,this.state[t+68][s+124]=!0,this.state[t+69][s+27]=!0,this.state[t+69][s+28]=!0,this.state[t+69][s+31]=!0,this.state[t+69][s+48]=!0,this.state[t+69][s+49]=!0,this.state[t+69][s+51]=!0,this.state[t+69][s+55]=!0,this.state[t+69][s+58]=!0,this.state[t+69][s+77]=!0,this.state[t+69][s+78]=!0,this.state[t+69][s+79]=!0,this.state[t+69][s+87]=!0,this.state[t+69][s+88]=!0,this.state[t+69][s+89]=!0,this.state[t+69][s+97]=!0,this.state[t+69][s+98]=!0,this.state[t+69][s+99]=!0,this.state[t+70][s+27]=!0,this.state[t+70][s+28]=!0,this.state[t+70][s+31]=!0,this.state[t+70][s+49]=!0,this.state[t+70][s+50]=!0,this.state[t+70][s+51]=!0,this.state[t+70][s+55]=!0,this.state[t+70][s+57]=!0,this.state[t+70][s+70]=!0,this.state[t+70][s+71]=!0,this.state[t+70][s+77]=!0,this.state[t+70][s+78]=!0,this.state[t+70][s+79]=!0,this.state[t+70][s+97]=!0,this.state[t+70][s+98]=!0,this.state[t+70][s+99]=!0,this.state[t+71][s+28]=!0,this.state[t+71][s+50]=!0,this.state[t+71][s+56]=!0,this.state[t+71][s+69]=!0,this.state[t+71][s+72]=!0,this.state[t+71][s+76]=!0,this.state[t+71][s+78]=!0,this.state[t+71][s+79]=!0,this.state[t+71][s+96]=!0,this.state[t+71][s+99]=!0,this.state[t+71][s+100]=!0,this.state[t+72][s+32]=!0,this.state[t+72][s+70]=!0,this.state[t+72][s+72]=!0,this.state[t+72][s+76]=!0,this.state[t+72][s+77]=!0,this.state[t+72][s+78]=!0,this.state[t+72][s+96]=!0,this.state[t+72][s+99]=!0,this.state[t+72][s+100]=!0,this.state[t+73][s+23]=!0,this.state[t+73][s+24]=!0,this.state[t+73][s+29]=!0,this.state[t+73][s+32]=!0,this.state[t+73][s+57]=!0,this.state[t+73][s+71]=!0,this.state[t+73][s+77]=!0,this.state[t+73][s+99]=!0,this.state[t+74][s+23]=!0,this.state[t+74][s+24]=!0,this.state[t+74][s+25]=!0,this.state[t+74][s+30]=!0,this.state[t+74][s+32]=!0,this.state[t+74][s+57]=!0,this.state[t+74][s+95]=!0,this.state[t+75][s+22]=!0,this.state[t+75][s+24]=!0,this.state[t+75][s+25]=!0,this.state[t+75][s+30]=!0,this.state[t+75][s+31]=!0,this.state[t+75][s+70]=!0,this.state[t+75][s+95]=!0,this.state[t+75][s+98]=!0,this.state[t+75][s+103]=!0,this.state[t+75][s+104]=!0,this.state[t+76][s+22]=!0,this.state[t+76][s+23]=!0,this.state[t+76][s+24]=!0,this.state[t+76][s+30]=!0,this.state[t+76][s+31]=!0,this.state[t+76][s+32]=!0,this.state[t+76][s+70]=!0,this.state[t+76][s+95]=!0,this.state[t+76][s+97]=!0,this.state[t+76][s+102]=!0,this.state[t+76][s+103]=!0,this.state[t+76][s+104]=!0,this.state[t+77][s+23]=!0,this.state[t+77][s+30]=!0,this.state[t+77][s+31]=!0,this.state[t+77][s+32]=!0,this.state[t+77][s+96]=!0,this.state[t+77][s+97]=!0,this.state[t+77][s+102]=!0,this.state[t+77][s+103]=!0,this.state[t+77][s+105]=!0,this.state[t+78][s+30]=!0,this.state[t+78][s+31]=!0,this.state[t+78][s+33]=!0,this.state[t+78][s+54]=!0,this.state[t+78][s+55]=!0,this.state[t+78][s+59]=!0,this.state[t+78][s+60]=!0,this.state[t+78][s+95]=!0,this.state[t+78][s+96]=!0,this.state[t+78][s+97]=!0,this.state[t+78][s+103]=!0,this.state[t+78][s+104]=!0,this.state[t+78][s+105]=!0,this.state[t+79][s+29]=!0,this.state[t+79][s+95]=!0,this.state[t+79][s+96]=!0,this.state[t+79][s+97]=!0,this.state[t+79][s+104]=!0,this.state[t+80][s+27]=!0,this.state[t+80][s+28]=!0,this.state[t+80][s+31]=!0,this.state[t+80][s+33]=!0,this.state[t+80][s+67]=!0,this.state[t+80][s+68]=!0,this.state[t+80][s+72]=!0,this.state[t+80][s+73]=!0,this.state[t+80][s+94]=!0,this.state[t+80][s+96]=!0,this.state[t+80][s+97]=!0,this.state[t+81][s+23]=!0,this.state[t+81][s+25]=!0,this.state[t+81][s+28]=!0,this.state[t+81][s+32]=!0,this.state[t+81][s+37]=!0,this.state[t+81][s+39]=!0,this.state[t+81][s+57]=!0,this.state[t+81][s+98]=!0,this.state[t+82][s+22]=!0,this.state[t+82][s+28]=!0,this.state[t+82][s+31]=!0,this.state[t+82][s+36]=!0,this.state[t+82][s+51]=!0,this.state[t+82][s+53]=!0,this.state[t+82][s+56]=!0,this.state[t+82][s+58]=!0,this.state[t+82][s+94]=!0,this.state[t+82][s+96]=!0,this.state[t+82][s+99]=!0,this.state[t+82][s+100]=!0,this.state[t+83][s+22]=!0,this.state[t+83][s+29]=!0,this.state[t+83][s+30]=!0,this.state[t+83][s+31]=!0,this.state[t+83][s+36]=!0,this.state[t+83][s+52]=!0,this.state[t+83][s+53]=!0,this.state[t+83][s+56]=!0,this.state[t+83][s+58]=!0,this.state[t+83][s+70]=!0,this.state[t+83][s+88]=!0,this.state[t+83][s+90]=!0,this.state[t+83][s+95]=!0,this.state[t+83][s+99]=!0,this.state[t+83][s+102]=!0,this.state[t+83][s+104]=!0,this.state[t+84][s+22]=!0,this.state[t+84][s+25]=!0,this.state[t+84][s+36]=!0,this.state[t+84][s+39]=!0,this.state[t+84][s+52]=!0,this.state[t+84][s+57]=!0,this.state[t+84][s+69]=!0,this.state[t+84][s+71]=!0,this.state[t+84][s+74]=!0,this.state[t+84][s+76]=!0,this.state[t+84][s+91]=!0,this.state[t+84][s+96]=!0,this.state[t+84][s+99]=!0,this.state[t+84][s+105]=!0,this.state[t+85][s+22]=!0,this.state[t+85][s+23]=!0,this.state[t+85][s+24]=!0,this.state[t+85][s+36]=!0,this.state[t+85][s+37]=!0,this.state[t+85][s+38]=!0,this.state[t+85][s+57]=!0,this.state[t+85][s+69]=!0,this.state[t+85][s+71]=!0,this.state[t+85][s+74]=!0,this.state[t+85][s+75]=!0,this.state[t+85][s+91]=!0,this.state[t+85][s+96]=!0,this.state[t+85][s+97]=!0,this.state[t+85][s+98]=!0,this.state[t+85][s+105]=!0,this.state[t+86][s+56]=!0,this.state[t+86][s+58]=!0,this.state[t+86][s+70]=!0,this.state[t+86][s+75]=!0,this.state[t+86][s+88]=!0,this.state[t+86][s+91]=!0,this.state[t+86][s+102]=!0,this.state[t+86][s+105]=!0,this.state[t+87][s+46]=!0,this.state[t+87][s+48]=!0,this.state[t+87][s+55]=!0,this.state[t+87][s+59]=!0,this.state[t+87][s+70]=!0,this.state[t+87][s+89]=!0,this.state[t+87][s+90]=!0,this.state[t+87][s+91]=!0,this.state[t+87][s+103]=!0,this.state[t+87][s+104]=!0,this.state[t+87][s+105]=!0,this.state[t+88][s+47]=!0,this.state[t+88][s+48]=!0,this.state[t+88][s+56]=!0,this.state[t+88][s+58]=!0,this.state[t+88][s+69]=!0,this.state[t+88][s+71]=!0,this.state[t+89][s+47]=!0,this.state[t+89][s+57]=!0,this.state[t+89][s+68]=!0,this.state[t+89][s+72]=!0,this.state[t+89][s+79]=!0,this.state[t+89][s+81]=!0,this.state[t+90][s+69]=!0,this.state[t+90][s+71]=!0,this.state[t+90][s+79]=!0,this.state[t+90][s+80]=!0,this.state[t+91][s+54]=!0,this.state[t+91][s+55]=!0,this.state[t+91][s+59]=!0,this.state[t+91][s+60]=!0,this.state[t+91][s+70]=!0,this.state[t+91][s+80]=!0,this.state[t+92][s+54]=!0,this.state[t+92][s+55]=!0,this.state[t+92][s+56]=!0,this.state[t+92][s+58]=!0,this.state[t+92][s+59]=!0,this.state[t+92][s+60]=!0,this.state[t+93][s+48]=!0,this.state[t+93][s+49]=!0,this.state[t+93][s+53]=!0,this.state[t+93][s+55]=!0,this.state[t+93][s+56]=!0,this.state[t+93][s+58]=!0,this.state[t+93][s+59]=!0,this.state[t+93][s+61]=!0,this.state[t+93][s+67]=!0,this.state[t+93][s+68]=!0,this.state[t+93][s+72]=!0,this.state[t+93][s+73]=!0,this.state[t+94][s+47]=!0,this.state[t+94][s+48]=!0,this.state[t+94][s+49]=!0,this.state[t+94][s+53]=!0,this.state[t+94][s+54]=!0,this.state[t+94][s+55]=!0,this.state[t+94][s+59]=!0,this.state[t+94][s+60]=!0,this.state[t+94][s+61]=!0,this.state[t+94][s+67]=!0,this.state[t+94][s+68]=!0,this.state[t+94][s+69]=!0,this.state[t+94][s+71]=!0,this.state[t+94][s+72]=!0,this.state[t+94][s+73]=!0,this.state[t+95][s+46]=!0,this.state[t+95][s+47]=!0,this.state[t+95][s+48]=!0,this.state[t+95][s+49]=!0,this.state[t+95][s+50]=!0,this.state[t+95][s+54]=!0,this.state[t+95][s+60]=!0,this.state[t+95][s+66]=!0,this.state[t+95][s+68]=!0,this.state[t+95][s+69]=!0,this.state[t+95][s+71]=!0,this.state[t+95][s+72]=!0,this.state[t+95][s+74]=!0,this.state[t+95][s+78]=!0,this.state[t+95][s+79]=!0,this.state[t+96][s+39]=!0,this.state[t+96][s+40]=!0,this.state[t+96][s+45]=!0,this.state[t+96][s+46]=!0,this.state[t+96][s+66]=!0,this.state[t+96][s+67]=!0,this.state[t+96][s+68]=!0,this.state[t+96][s+72]=!0,this.state[t+96][s+73]=!0,this.state[t+96][s+74]=!0,this.state[t+96][s+78]=!0,this.state[t+96][s+79]=!0,this.state[t+96][s+80]=!0,this.state[t+97][s+39]=!0,this.state[t+97][s+40]=!0,this.state[t+97][s+41]=!0,this.state[t+97][s+46]=!0,this.state[t+97][s+47]=!0,this.state[t+97][s+48]=!0,this.state[t+97][s+49]=!0,this.state[t+97][s+50]=!0,this.state[t+97][s+67]=!0,this.state[t+97][s+73]=!0,this.state[t+97][s+77]=!0,this.state[t+97][s+78]=!0,this.state[t+97][s+79]=!0,this.state[t+97][s+80]=!0,this.state[t+97][s+81]=!0,this.state[t+98][s+38]=!0,this.state[t+98][s+40]=!0,this.state[t+98][s+41]=!0,this.state[t+98][s+47]=!0,this.state[t+98][s+48]=!0,this.state[t+98][s+49]=!0,this.state[t+98][s+81]=!0,this.state[t+98][s+82]=!0,this.state[t+98][s+87]=!0,this.state[t+98][s+88]=!0,this.state[t+99][s+38]=!0,this.state[t+99][s+39]=!0,this.state[t+99][s+40]=!0,this.state[t+99][s+48]=!0,this.state[t+99][s+77]=!0,this.state[t+99][s+78]=!0,this.state[t+99][s+79]=!0,this.state[t+99][s+80]=!0,this.state[t+99][s+81]=!0,this.state[t+99][s+86]=!0,this.state[t+99][s+87]=!0,this.state[t+99][s+88]=!0,this.state[t+100][s+39]=!0,this.state[t+100][s+78]=!0,this.state[t+100][s+79]=!0,this.state[t+100][s+80]=!0,this.state[t+100][s+86]=!0,this.state[t+100][s+87]=!0,this.state[t+100][s+89]=!0,this.state[t+101][s+45]=!0,this.state[t+101][s+46]=!0,this.state[t+101][s+79]=!0,this.state[t+101][s+87]=!0,this.state[t+101][s+88]=!0,this.state[t+101][s+89]=!0,this.state[t+102][s+45]=!0,this.state[t+102][s+46]=!0,this.state[t+102][s+88]=!0,this.state[t+103][s+81]=!0,this.state[t+103][s+82]=!0,this.state[t+104][s+55]=!0,this.state[t+104][s+57]=!0,this.state[t+104][s+81]=!0,this.state[t+104][s+82]=!0,this.state[t+105][s+54]=!0,this.state[t+106][s+54]=!0,this.state[t+106][s+70]=!0,this.state[t+106][s+72]=!0,this.state[t+107][s+54]=!0,this.state[t+107][s+57]=!0,this.state[t+107][s+73]=!0,this.state[t+108][s+54]=!0,this.state[t+108][s+55]=!0,this.state[t+108][s+56]=!0,this.state[t+108][s+73]=!0,this.state[t+109][s+70]=!0,this.state[t+109][s+73]=!0,this.state[t+110][s+49]=!0,this.state[t+110][s+50]=!0,this.state[t+110][s+71]=!0,this.state[t+110][s+72]=!0,this.state[t+110][s+73]=!0,this.state[t+111][s+47]=!0,this.state[t+111][s+48]=!0,this.state[t+111][s+50]=!0,this.state[t+112][s+46]=!0,this.state[t+112][s+50]=!0,this.state[t+112][s+77]=!0,this.state[t+112][s+78]=!0,this.state[t+113][s+40]=!0,this.state[t+113][s+41]=!0,this.state[t+113][s+46]=!0,this.state[t+113][s+49]=!0,this.state[t+113][s+50]=!0,this.state[t+113][s+54]=!0,this.state[t+113][s+55]=!0,this.state[t+113][s+77]=!0,this.state[t+113][s+79]=!0,this.state[t+113][s+80]=!0,this.state[t+114][s+39]=!0,this.state[t+114][s+40]=!0,this.state[t+114][s+41]=!0,this.state[t+114][s+47]=!0,this.state[t+114][s+48]=!0,this.state[t+114][s+49]=!0,this.state[t+114][s+53]=!0,this.state[t+114][s+54]=!0,this.state[t+114][s+55]=!0,this.state[t+114][s+77]=!0,this.state[t+114][s+81]=!0,this.state[t+115][s+39]=!0,this.state[t+115][s+40]=!0,this.state[t+115][s+42]=!0,this.state[t+115][s+48]=!0,this.state[t+115][s+53]=!0,this.state[t+115][s+54]=!0,this.state[t+115][s+56]=!0,this.state[t+115][s+72]=!0,this.state[t+115][s+73]=!0,this.state[t+115][s+77]=!0,this.state[t+115][s+78]=!0,this.state[t+115][s+81]=!0,this.state[t+115][s+86]=!0,this.state[t+115][s+87]=!0,this.state[t+116][s+40]=!0,this.state[t+116][s+41]=!0,this.state[t+116][s+42]=!0,this.state[t+116][s+54]=!0,this.state[t+116][s+55]=!0,this.state[t+116][s+56]=!0,this.state[t+116][s+72]=!0,this.state[t+116][s+73]=!0,this.state[t+116][s+74]=!0,this.state[t+116][s+78]=!0,this.state[t+116][s+79]=!0,this.state[t+116][s+80]=!0,this.state[t+116][s+86]=!0,this.state[t+116][s+87]=!0,this.state[t+116][s+88]=!0,this.state[t+117][s+41]=!0,this.state[t+117][s+55]=!0,this.state[t+117][s+71]=!0,this.state[t+117][s+73]=!0,this.state[t+117][s+74]=!0,this.state[t+117][s+79]=!0,this.state[t+117][s+85]=!0,this.state[t+117][s+87]=!0,this.state[t+117][s+88]=!0,this.state[t+118][s+71]=!0,this.state[t+118][s+72]=!0,this.state[t+118][s+73]=!0,this.state[t+118][s+85]=!0,this.state[t+118][s+86]=!0,this.state[t+118][s+87]=!0,this.state[t+119][s+72]=!0,this.state[t+119][s+86]=!0
},this.cordership=function(){var t=Math.floor(Math.random()*(.7*this.width+1)+.15*this.width),s=Math.floor(Math.random()*(.8*this.height+1)+.1*this.height);this.state[t+-88][s+-4]=!0,this.state[t+-88][s+-3]=!0,this.state[t+-87][s+-4]=!0,this.state[t+-87][s+-3]=!0,this.state[t+-86][s+-4]=!0,this.state[t+-86][s+-3]=!0,this.state[t+-85][s+-4]=!0,this.state[t+-85][s+-3]=!0,this.state[t+-84][s+0]=!0,this.state[t+-84][s+1]=!0,this.state[t+-84][s+12]=!0,this.state[t+-84][s+13]=!0,this.state[t+-83][s+0]=!0,this.state[t+-83][s+1]=!0,this.state[t+-83][s+12]=!0,this.state[t+-83][s+13]=!0,this.state[t+-82][s+-2]=!0,this.state[t+-82][s+-1]=!0,this.state[t+-82][s+12]=!0,this.state[t+-82][s+13]=!0,this.state[t+-82][s+16]=!0,this.state[t+-82][s+17]=!0,this.state[t+-81][s+-2]=!0,this.state[t+-81][s+-1]=!0,this.state[t+-81][s+12]=!0,this.state[t+-81][s+13]=!0,this.state[t+-81][s+16]=!0,this.state[t+-81][s+17]=!0,this.state[t+-80][s+-4]=!0,this.state[t+-80][s+-3]=!0,this.state[t+-80][s+4]=!0,this.state[t+-80][s+5]=!0,this.state[t+-80][s+10]=!0,this.state[t+-80][s+11]=!0,this.state[t+-79][s+-4]=!0,this.state[t+-79][s+-3]=!0,this.state[t+-79][s+4]=!0,this.state[t+-79][s+5]=!0,this.state[t+-79][s+10]=!0,this.state[t+-79][s+11]=!0,this.state[t+-78][s+-2]=!0,this.state[t+-78][s+-1]=!0,this.state[t+-78][s+4]=!0,this.state[t+-78][s+5]=!0,this.state[t+-78][s+8]=!0,this.state[t+-78][s+9]=!0,this.state[t+-78][s+12]=!0,this.state[t+-78][s+13]=!0,this.state[t+-78][s+14]=!0,this.state[t+-78][s+15]=!0,this.state[t+-77][s+-2]=!0,this.state[t+-77][s+-1]=!0,this.state[t+-77][s+4]=!0,this.state[t+-77][s+5]=!0,this.state[t+-77][s+8]=!0,this.state[t+-77][s+9]=!0,this.state[t+-77][s+12]=!0,this.state[t+-77][s+13]=!0,this.state[t+-77][s+14]=!0,this.state[t+-77][s+15]=!0,this.state[t+-76][s+8]=!0,this.state[t+-76][s+9]=!0,this.state[t+-76][s+12]=!0,this.state[t+-76][s+13]=!0,this.state[t+-76][s+14]=!0,this.state[t+-76][s+15]=!0,this.state[t+-75][s+8]=!0,this.state[t+-75][s+9]=!0,this.state[t+-75][s+12]=!0,this.state[t+-75][s+13]=!0,this.state[t+-75][s+14]=!0,this.state[t+-75][s+15]=!0,this.state[t+-74][s+36]=!0,this.state[t+-74][s+37]=!0,this.state[t+-74][s+38]=!0,this.state[t+-74][s+39]=!0,this.state[t+-73][s+36]=!0,this.state[t+-73][s+37]=!0,this.state[t+-73][s+38]=!0,this.state[t+-73][s+39]=!0,this.state[t+-72][s+36]=!0,this.state[t+-72][s+37]=!0,this.state[t+-72][s+38]=!0,this.state[t+-72][s+39]=!0,this.state[t+-71][s+36]=!0,this.state[t+-71][s+37]=!0,this.state[t+-71][s+38]=!0,this.state[t+-71][s+39]=!0,this.state[t+-58][s+52]=!0,this.state[t+-58][s+53]=!0,this.state[t+-58][s+54]=!0,this.state[t+-58][s+55]=!0,this.state[t+-57][s+52]=!0,this.state[t+-57][s+53]=!0,this.state[t+-57][s+54]=!0,this.state[t+-57][s+55]=!0,this.state[t+-56][s+-36]=!0,this.state[t+-56][s+-35]=!0,this.state[t+-56][s+-34]=!0,this.state[t+-56][s+-33]=!0,this.state[t+-56][s+-28]=!0,this.state[t+-56][s+-27]=!0,this.state[t+-56][s+52]=!0,this.state[t+-56][s+53]=!0,this.state[t+-56][s+54]=!0,this.state[t+-56][s+55]=!0,this.state[t+-55][s+-36]=!0,this.state[t+-55][s+-35]=!0,this.state[t+-55][s+-34]=!0,this.state[t+-55][s+-33]=!0,this.state[t+-55][s+-28]=!0,this.state[t+-55][s+-27]=!0,this.state[t+-55][s+52]=!0,this.state[t+-55][s+53]=!0,this.state[t+-55][s+54]=!0,this.state[t+-55][s+55]=!0,this.state[t+-54][s+-30]=!0,this.state[t+-54][s+-29]=!0,this.state[t+-54][s+-26]=!0,this.state[t+-54][s+-25]=!0,this.state[t+-53][s+-30]=!0,this.state[t+-53][s+-29]=!0,this.state[t+-53][s+-26]=!0,this.state[t+-53][s+-25]=!0,this.state[t+-52][s+-32]=!0,this.state[t+-52][s+-31]=!0,this.state[t+-51][s+-32]=!0,this.state[t+-51][s+-31]=!0,this.state[t+-48][s+-28]=!0,this.state[t+-48][s+-27]=!0,this.state[t+-48][s+-26]=!0,this.state[t+-48][s+-25]=!0,this.state[t+-47][s+-28]=!0,this.state[t+-47][s+-27]=!0,this.state[t+-47][s+-26]=!0,this.state[t+-47][s+-25]=!0,this.state[t+-44][s+-26]=!0,this.state[t+-44][s+-25]=!0,this.state[t+-44][s+-24]=!0,this.state[t+-44][s+-23]=!0,this.state[t+-43][s+-26]=!0,this.state[t+-43][s+-25]=!0,this.state[t+-43][s+-24]=!0,this.state[t+-43][s+-23]=!0,this.state[t+-42][s+-28]=!0,this.state[t+-42][s+-27]=!0,this.state[t+-42][s+68]=!0,this.state[t+-42][s+69]=!0,this.state[t+-42][s+70]=!0,this.state[t+-42][s+71]=!0,this.state[t+-41][s+-28]=!0,this.state[t+-41][s+-27]=!0,this.state[t+-41][s+68]=!0,this.state[t+-41][s+69]=!0,this.state[t+-41][s+70]=!0,this.state[t+-41][s+71]=!0,this.state[t+-40][s+-32]=!0,this.state[t+-40][s+-31]=!0,this.state[t+-40][s+-30]=!0,this.state[t+-40][s+-29]=!0,this.state[t+-40][s+-26]=!0,this.state[t+-40][s+-25]=!0,this.state[t+-40][s+-24]=!0,this.state[t+-40][s+-23]=!0,this.state[t+-40][s+68]=!0,this.state[t+-40][s+69]=!0,this.state[t+-40][s+70]=!0,this.state[t+-40][s+71]=!0,this.state[t+-39][s+-32]=!0,this.state[t+-39][s+-31]=!0,this.state[t+-39][s+-30]=!0,this.state[t+-39][s+-29]=!0,this.state[t+-39][s+-26]=!0,this.state[t+-39][s+-25]=!0,this.state[t+-39][s+-24]=!0,this.state[t+-39][s+-23]=!0,this.state[t+-39][s+68]=!0,this.state[t+-39][s+69]=!0,this.state[t+-39][s+70]=!0,this.state[t+-39][s+71]=!0,this.state[t+-38][s+-26]=!0,this.state[t+-38][s+-25]=!0,this.state[t+-38][s+-24]=!0,this.state[t+-38][s+-23]=!0,this.state[t+-37][s+-26]=!0,this.state[t+-37][s+-25]=!0,this.state[t+-37][s+-24]=!0,this.state[t+-37][s+-23]=!0,this.state[t+-36][s+-56]=!0,this.state[t+-36][s+-55]=!0,this.state[t+-36][s+-30]=!0,this.state[t+-36][s+-29]=!0,this.state[t+-35][s+-56]=!0,this.state[t+-35][s+-55]=!0,this.state[t+-35][s+-30]=!0,this.state[t+-35][s+-29]=!0,this.state[t+-34][s+-56]=!0,this.state[t+-34][s+-55]=!0,this.state[t+-34][s+-10]=!0,this.state[t+-34][s+-9]=!0,this.state[t+-34][s+-8]=!0,this.state[t+-34][s+-7]=!0,this.state[t+-34][s+-6]=!0,this.state[t+-34][s+-5]=!0,this.state[t+-33][s+-56]=!0,this.state[t+-33][s+-55]=!0,this.state[t+-33][s+-10]=!0,this.state[t+-33][s+-9]=!0,this.state[t+-33][s+-8]=!0,this.state[t+-33][s+-7]=!0,this.state[t+-33][s+-6]=!0,this.state[t+-33][s+-5]=!0,this.state[t+-32][s+-52]=!0,this.state[t+-32][s+-51]=!0,this.state[t+-32][s+-40]=!0,this.state[t+-32][s+-39]=!0,this.state[t+-32][s+-12]=!0,this.state[t+-32][s+-11]=!0,this.state[t+-31][s+-52]=!0,this.state[t+-31][s+-51]=!0,this.state[t+-31][s+-40]=!0,this.state[t+-31][s+-39]=!0,this.state[t+-31][s+-12]=!0,this.state[t+-31][s+-11]=!0,this.state[t+-30][s+-54]=!0,this.state[t+-30][s+-53]=!0,this.state[t+-30][s+-40]=!0,this.state[t+-30][s+-39]=!0,this.state[t+-30][s+-36]=!0,this.state[t+-30][s+-35]=!0,this.state[t+-30][s+-14]=!0,this.state[t+-30][s+-13]=!0,this.state[t+-30][s+-4]=!0,this.state[t+-30][s+-3]=!0,this.state[t+-30][s+-2]=!0,this.state[t+-30][s+-1]=!0,this.state[t+-29][s+-54]=!0,this.state[t+-29][s+-53]=!0,this.state[t+-29][s+-40]=!0,this.state[t+-29][s+-39]=!0,this.state[t+-29][s+-36]=!0,this.state[t+-29][s+-35]=!0,this.state[t+-29][s+-14]=!0,this.state[t+-29][s+-13]=!0,this.state[t+-29][s+-4]=!0,this.state[t+-29][s+-3]=!0,this.state[t+-29][s+-2]=!0,this.state[t+-29][s+-1]=!0,this.state[t+-28][s+-56]=!0,this.state[t+-28][s+-55]=!0,this.state[t+-28][s+-48]=!0,this.state[t+-28][s+-47]=!0,this.state[t+-28][s+-42]=!0,this.state[t+-28][s+-41]=!0,this.state[t+-28][s+-16]=!0,this.state[t+-28][s+-15]=!0,this.state[t+-28][s+-8]=!0,this.state[t+-28][s+-7]=!0,this.state[t+-27][s+-56]=!0,this.state[t+-27][s+-55]=!0,this.state[t+-27][s+-48]=!0,this.state[t+-27][s+-47]=!0,this.state[t+-27][s+-42]=!0,this.state[t+-27][s+-41]=!0,this.state[t+-27][s+-16]=!0,this.state[t+-27][s+-15]=!0,this.state[t+-27][s+-8]=!0,this.state[t+-27][s+-7]=!0,this.state[t+-26][s+-54]=!0,this.state[t+-26][s+-53]=!0,this.state[t+-26][s+-48]=!0,this.state[t+-26][s+-47]=!0,this.state[t+-26][s+-44]=!0,this.state[t+-26][s+-43]=!0,this.state[t+-26][s+-40]=!0,this.state[t+-26][s+-39]=!0,this.state[t+-26][s+-38]=!0,this.state[t+-26][s+-37]=!0,this.state[t+-26][s+-16]=!0,this.state[t+-26][s+-15]=!0,this.state[t+-26][s+-10]=!0,this.state[t+-26][s+-9]=!0,this.state[t+-26][s+0]=!0,this.state[t+-26][s+1]=!0,this.state[t+-26][s+84]=!0,this.state[t+-26][s+85]=!0,this.state[t+-26][s+86]=!0,this.state[t+-26][s+87]=!0,this.state[t+-25][s+-54]=!0,this.state[t+-25][s+-53]=!0,this.state[t+-25][s+-48]=!0,this.state[t+-25][s+-47]=!0,this.state[t+-25][s+-44]=!0,this.state[t+-25][s+-43]=!0,this.state[t+-25][s+-40]=!0,this.state[t+-25][s+-39]=!0,this.state[t+-25][s+-38]=!0,this.state[t+-25][s+-37]=!0,this.state[t+-25][s+-16]=!0,this.state[t+-25][s+-15]=!0,this.state[t+-25][s+-10]=!0,this.state[t+-25][s+-9]=!0,this.state[t+-25][s+0]=!0,this.state[t+-25][s+1]=!0,this.state[t+-25][s+84]=!0,this.state[t+-25][s+85]=!0,this.state[t+-25][s+86]=!0,this.state[t+-25][s+87]=!0,this.state[t+-24][s+-44]=!0,this.state[t+-24][s+-43]=!0,this.state[t+-24][s+-40]=!0,this.state[t+-24][s+-39]=!0,this.state[t+-24][s+-38]=!0,this.state[t+-24][s+-37]=!0,this.state[t+-24][s+-16]=!0,this.state[t+-24][s+-15]=!0,this.state[t+-24][s+-8]=!0,this.state[t+-24][s+-7]=!0,this.state[t+-24][s+0]=!0,this.state[t+-24][s+1]=!0,this.state[t+-24][s+66]=!0,this.state[t+-24][s+67]=!0,this.state[t+-24][s+84]=!0,this.state[t+-24][s+85]=!0,this.state[t+-24][s+86]=!0,this.state[t+-24][s+87]=!0,this.state[t+-23][s+-44]=!0,this.state[t+-23][s+-43]=!0,this.state[t+-23][s+-40]=!0,this.state[t+-23][s+-39]=!0,this.state[t+-23][s+-38]=!0,this.state[t+-23][s+-37]=!0,this.state[t+-23][s+-16]=!0,this.state[t+-23][s+-15]=!0,this.state[t+-23][s+-8]=!0,this.state[t+-23][s+-7]=!0,this.state[t+-23][s+0]=!0,this.state[t+-23][s+1]=!0,this.state[t+-23][s+66]=!0,this.state[t+-23][s+67]=!0,this.state[t+-23][s+84]=!0,this.state[t+-23][s+85]=!0,this.state[t+-23][s+86]=!0,this.state[t+-23][s+87]=!0,this.state[t+-22][s+-14]=!0,this.state[t+-22][s+-13]=!0,this.state[t+-22][s+-12]=!0,this.state[t+-22][s+-11]=!0,this.state[t+-22][s+-8]=!0,this.state[t+-22][s+-7]=!0,this.state[t+-22][s+-4]=!0,this.state[t+-22][s+-3]=!0,this.state[t+-22][s+-2]=!0,this.state[t+-22][s+-1]=!0,this.state[t+-22][s+0]=!0,this.state[t+-22][s+1]=!0,this.state[t+-22][s+64]=!0,this.state[t+-22][s+65]=!0,this.state[t+-22][s+68]=!0,this.state[t+-22][s+69]=!0,this.state[t+-21][s+-14]=!0,this.state[t+-21][s+-13]=!0,this.state[t+-21][s+-12]=!0,this.state[t+-21][s+-11]=!0,this.state[t+-21][s+-8]=!0,this.state[t+-21][s+-7]=!0,this.state[t+-21][s+-4]=!0,this.state[t+-21][s+-3]=!0,this.state[t+-21][s+-2]=!0,this.state[t+-21][s+-1]=!0,this.state[t+-21][s+0]=!0,this.state[t+-21][s+1]=!0,this.state[t+-21][s+64]=!0,this.state[t+-21][s+65]=!0,this.state[t+-21][s+68]=!0,this.state[t+-21][s+69]=!0,this.state[t+-20][s+-8]=!0,this.state[t+-20][s+-7]=!0,this.state[t+-19][s+-8]=!0,this.state[t+-19][s+-7]=!0,this.state[t+-18][s+-6]=!0,this.state[t+-18][s+-5]=!0,this.state[t+-18][s+-4]=!0,this.state[t+-18][s+-3]=!0,this.state[t+-18][s+-2]=!0,this.state[t+-18][s+-1]=!0,this.state[t+-18][s+0]=!0,this.state[t+-18][s+1]=!0,this.state[t+-18][s+64]=!0,this.state[t+-18][s+65]=!0,this.state[t+-18][s+70]=!0,this.state[t+-18][s+71]=!0,this.state[t+-17][s+-6]=!0,this.state[t+-17][s+-5]=!0,this.state[t+-17][s+-4]=!0,this.state[t+-17][s+-3]=!0,this.state[t+-17][s+-2]=!0,this.state[t+-17][s+-1]=!0,this.state[t+-17][s+0]=!0,this.state[t+-17][s+1]=!0,this.state[t+-17][s+64]=!0,this.state[t+-17][s+65]=!0,this.state[t+-17][s+70]=!0,this.state[t+-17][s+71]=!0,this.state[t+-16][s+-28]=!0,this.state[t+-16][s+-27]=!0,this.state[t+-16][s+-26]=!0,this.state[t+-16][s+-25]=!0,this.state[t+-16][s+-24]=!0,this.state[t+-16][s+-23]=!0,this.state[t+-16][s+-2]=!0,this.state[t+-16][s+-1]=!0,this.state[t+-16][s+0]=!0,this.state[t+-16][s+1]=!0,this.state[t+-16][s+68]=!0,this.state[t+-16][s+69]=!0,this.state[t+-16][s+70]=!0,this.state[t+-16][s+71]=!0,this.state[t+-15][s+-28]=!0,this.state[t+-15][s+-27]=!0,this.state[t+-15][s+-26]=!0,this.state[t+-15][s+-25]=!0,this.state[t+-15][s+-24]=!0,this.state[t+-15][s+-23]=!0,this.state[t+-15][s+-2]=!0,this.state[t+-15][s+-1]=!0,this.state[t+-15][s+0]=!0,this.state[t+-15][s+1]=!0,this.state[t+-15][s+68]=!0,this.state[t+-15][s+69]=!0,this.state[t+-15][s+70]=!0,this.state[t+-15][s+71]=!0,this.state[t+-14][s+-30]=!0,this.state[t+-14][s+-29]=!0,this.state[t+-14][s+-22]=!0,this.state[t+-14][s+-21]=!0,this.state[t+-14][s+70]=!0,this.state[t+-14][s+71]=!0,this.state[t+-13][s+-30]=!0,this.state[t+-13][s+-29]=!0,this.state[t+-13][s+-22]=!0,this.state[t+-13][s+-21]=!0,this.state[t+-13][s+70]=!0,this.state[t+-13][s+71]=!0,this.state[t+-12][s+-32]=!0,this.state[t+-12][s+-31]=!0,this.state[t+-12][s+-22]=!0,this.state[t+-12][s+-21]=!0,this.state[t+-11][s+-32]=!0,this.state[t+-11][s+-31]=!0,this.state[t+-11][s+-22]=!0,this.state[t+-11][s+-21]=!0,this.state[t+-10][s+-34]=!0,this.state[t+-10][s+-33]=!0,this.state[t+-10][s+-26]=!0,this.state[t+-10][s+-25]=!0,this.state[t+-9][s+-34]=!0,this.state[t+-9][s+-33]=!0,this.state[t+-9][s+-26]=!0,this.state[t+-9][s+-25]=!0,this.state[t+-8][s+-34]=!0,this.state[t+-8][s+-33]=!0,this.state[t+-8][s+-28]=!0,this.state[t+-8][s+-27]=!0,this.state[t+-8][s+-24]=!0,this.state[t+-8][s+-23]=!0,this.state[t+-8][s+-22]=!0,this.state[t+-8][s+-21]=!0,this.state[t+-8][s+-20]=!0,this.state[t+-8][s+-19]=!0,this.state[t+-7][s+-34]=!0,this.state[t+-7][s+-33]=!0,this.state[t+-7][s+-28]=!0,this.state[t+-7][s+-27]=!0,this.state[t+-7][s+-24]=!0,this.state[t+-7][s+-23]=!0,this.state[t+-7][s+-22]=!0,this.state[t+-7][s+-21]=!0,this.state[t+-7][s+-20]=!0,this.state[t+-7][s+-19]=!0,this.state[t+-6][s+-34]=!0,this.state[t+-6][s+-33]=!0,this.state[t+-6][s+-18]=!0,this.state[t+-6][s+-17]=!0,this.state[t+-5][s+-34]=!0,this.state[t+-5][s+-33]=!0,this.state[t+-5][s+-18]=!0,this.state[t+-5][s+-17]=!0,this.state[t+-4][s+-88]=!0,this.state[t+-4][s+-87]=!0,this.state[t+-4][s+-86]=!0,this.state[t+-4][s+-85]=!0,this.state[t+-4][s+-80]=!0,this.state[t+-4][s+-79]=!0,this.state[t+-4][s+-30]=!0,this.state[t+-4][s+-29]=!0,this.state[t+-4][s+-22]=!0,this.state[t+-4][s+-21]=!0,this.state[t+-4][s+-18]=!0,this.state[t+-4][s+-17]=!0,this.state[t+-4][s+64]=!0,this.state[t+-4][s+65]=!0,this.state[t+-4][s+66]=!0,this.state[t+-4][s+67]=!0,this.state[t+-3][s+-88]=!0,this.state[t+-3][s+-87]=!0,this.state[t+-3][s+-86]=!0,this.state[t+-3][s+-85]=!0,this.state[t+-3][s+-80]=!0,this.state[t+-3][s+-79]=!0,this.state[t+-3][s+-30]=!0,this.state[t+-3][s+-29]=!0,this.state[t+-3][s+-22]=!0,this.state[t+-3][s+-21]=!0,this.state[t+-3][s+-18]=!0,this.state[t+-3][s+-17]=!0,this.state[t+-3][s+64]=!0,this.state[t+-3][s+65]=!0,this.state[t+-3][s+66]=!0,this.state[t+-3][s+67]=!0,this.state[t+-2][s+-82]=!0,this.state[t+-2][s+-81]=!0,this.state[t+-2][s+-78]=!0,this.state[t+-2][s+-77]=!0,this.state[t+-2][s+-30]=!0,this.state[t+-2][s+-29]=!0,this.state[t+-2][s+-22]=!0,this.state[t+-2][s+-21]=!0,this.state[t+-2][s+-18]=!0,this.state[t+-2][s+-17]=!0,this.state[t+-2][s+-16]=!0,this.state[t+-2][s+-15]=!0,this.state[t+-2][s+68]=!0,this.state[t+-2][s+69]=!0,this.state[t+-1][s+-82]=!0,this.state[t+-1][s+-81]=!0,this.state[t+-1][s+-78]=!0,this.state[t+-1][s+-77]=!0,this.state[t+-1][s+-30]=!0,this.state[t+-1][s+-29]=!0,this.state[t+-1][s+-22]=!0,this.state[t+-1][s+-21]=!0,this.state[t+-1][s+-18]=!0,this.state[t+-1][s+-17]=!0,this.state[t+-1][s+-16]=!0,this.state[t+-1][s+-15]=!0,this.state[t+-1][s+68]=!0,this.state[t+-1][s+69]=!0,this.state[t+0][s+-84]=!0,this.state[t+0][s+-83]=!0,this.state[t+0][s+-26]=!0,this.state[t+0][s+-25]=!0,this.state[t+0][s+-24]=!0,this.state[t+0][s+-23]=!0,this.state[t+0][s+-22]=!0,this.state[t+0][s+-21]=!0,this.state[t+0][s+-18]=!0,this.state[t+0][s+-17]=!0,this.state[t+0][s+-16]=!0,this.state[t+0][s+-15]=!0,this.state[t+0][s+64]=!0,this.state[t+0][s+65]=!0,this.state[t+0][s+66]=!0,this.state[t+0][s+67]=!0,this.state[t+1][s+-84]=!0,this.state[t+1][s+-83]=!0,this.state[t+1][s+-26]=!0,this.state[t+1][s+-25]=!0,this.state[t+1][s+-24]=!0,this.state[t+1][s+-23]=!0,this.state[t+1][s+-22]=!0,this.state[t+1][s+-21]=!0,this.state[t+1][s+-18]=!0,this.state[t+1][s+-17]=!0,this.state[t+1][s+-16]=!0,this.state[t+1][s+-15]=!0,this.state[t+1][s+64]=!0,this.state[t+1][s+65]=!0,this.state[t+1][s+66]=!0,this.state[t+1][s+67]=!0,this.state[t+4][s+-80]=!0,this.state[t+4][s+-79]=!0,this.state[t+4][s+-78]=!0,this.state[t+4][s+-77]=!0,this.state[t+5][s+-80]=!0,this.state[t+5][s+-79]=!0,this.state[t+5][s+-78]=!0,this.state[t+5][s+-77]=!0,this.state[t+8][s+-78]=!0,this.state[t+8][s+-77]=!0,this.state[t+8][s+-76]=!0,this.state[t+8][s+-75]=!0,this.state[t+9][s+-78]=!0,this.state[t+9][s+-77]=!0,this.state[t+9][s+-76]=!0,this.state[t+9][s+-75]=!0,this.state[t+10][s+-80]=!0,this.state[t+10][s+-79]=!0,this.state[t+11][s+-80]=!0,this.state[t+11][s+-79]=!0,this.state[t+12][s+-84]=!0,this.state[t+12][s+-83]=!0,this.state[t+12][s+-82]=!0,this.state[t+12][s+-81]=!0,this.state[t+12][s+-78]=!0,this.state[t+12][s+-77]=!0,this.state[t+12][s+-76]=!0,this.state[t+12][s+-75]=!0,this.state[t+12][s+30]=!0,this.state[t+12][s+31]=!0,this.state[t+12][s+34]=!0,this.state[t+12][s+35]=!0,this.state[t+12][s+48]=!0,this.state[t+12][s+49]=!0,this.state[t+12][s+52]=!0,this.state[t+12][s+53]=!0,this.state[t+13][s+-84]=!0,this.state[t+13][s+-83]=!0,this.state[t+13][s+-82]=!0,this.state[t+13][s+-81]=!0,this.state[t+13][s+-78]=!0,this.state[t+13][s+-77]=!0,this.state[t+13][s+-76]=!0,this.state[t+13][s+-75]=!0,this.state[t+13][s+30]=!0,this.state[t+13][s+31]=!0,this.state[t+13][s+34]=!0,this.state[t+13][s+35]=!0,this.state[t+13][s+48]=!0,this.state[t+13][s+49]=!0,this.state[t+13][s+52]=!0,this.state[t+13][s+53]=!0,this.state[t+14][s+-78]=!0,this.state[t+14][s+-77]=!0,this.state[t+14][s+-76]=!0,this.state[t+14][s+-75]=!0,this.state[t+14][s+28]=!0,this.state[t+14][s+29]=!0,this.state[t+14][s+48]=!0,this.state[t+14][s+49]=!0,this.state[t+14][s+52]=!0,this.state[t+14][s+53]=!0,this.state[t+15][s+-78]=!0,this.state[t+15][s+-77]=!0,this.state[t+15][s+-76]=!0,this.state[t+15][s+-75]=!0,this.state[t+15][s+28]=!0,this.state[t+15][s+29]=!0,this.state[t+15][s+48]=!0,this.state[t+15][s+49]=!0,this.state[t+15][s+52]=!0,this.state[t+15][s+53]=!0,this.state[t+16][s+-82]=!0,this.state[t+16][s+-81]=!0,this.state[t+16][s+30]=!0,this.state[t+16][s+31]=!0,this.state[t+16][s+36]=!0,this.state[t+16][s+37]=!0,this.state[t+16][s+50]=!0,this.state[t+16][s+51]=!0,this.state[t+17][s+-82]=!0,this.state[t+17][s+-81]=!0,this.state[t+17][s+30]=!0,this.state[t+17][s+31]=!0,this.state[t+17][s+36]=!0,this.state[t+17][s+37]=!0,this.state[t+17][s+50]=!0,this.state[t+17][s+51]=!0,this.state[t+18][s+34]=!0,this.state[t+18][s+35]=!0,this.state[t+18][s+36]=!0,this.state[t+18][s+37]=!0,this.state[t+18][s+38]=!0,this.state[t+18][s+39]=!0,this.state[t+19][s+34]=!0,this.state[t+19][s+35]=!0,this.state[t+19][s+36]=!0,this.state[t+19][s+37]=!0,this.state[t+19][s+38]=!0,this.state[t+19][s+39]=!0,this.state[t+28][s+14]=!0,this.state[t+28][s+15]=!0,this.state[t+29][s+14]=!0,this.state[t+29][s+15]=!0,this.state[t+30][s+12]=!0,this.state[t+30][s+13]=!0,this.state[t+30][s+16]=!0,this.state[t+30][s+17]=!0,this.state[t+31][s+12]=!0,this.state[t+31][s+13]=!0,this.state[t+31][s+16]=!0,this.state[t+31][s+17]=!0,this.state[t+34][s+12]=!0,this.state[t+34][s+13]=!0,this.state[t+34][s+18]=!0,this.state[t+34][s+19]=!0,this.state[t+35][s+12]=!0,this.state[t+35][s+13]=!0,this.state[t+35][s+18]=!0,this.state[t+35][s+19]=!0,this.state[t+36][s+-74]=!0,this.state[t+36][s+-73]=!0,this.state[t+36][s+-72]=!0,this.state[t+36][s+-71]=!0,this.state[t+36][s+16]=!0,this.state[t+36][s+17]=!0,this.state[t+36][s+18]=!0,this.state[t+36][s+19]=!0,this.state[t+37][s+-74]=!0,this.state[t+37][s+-73]=!0,this.state[t+37][s+-72]=!0,this.state[t+37][s+-71]=!0,this.state[t+37][s+16]=!0,this.state[t+37][s+17]=!0,this.state[t+37][s+18]=!0,this.state[t+37][s+19]=!0,this.state[t+38][s+-74]=!0,this.state[t+38][s+-73]=!0,this.state[t+38][s+-72]=!0,this.state[t+38][s+-71]=!0,this.state[t+38][s+18]=!0,this.state[t+38][s+19]=!0,this.state[t+39][s+-74]=!0,this.state[t+39][s+-73]=!0,this.state[t+39][s+-72]=!0,this.state[t+39][s+-71]=!0,this.state[t+39][s+18]=!0,this.state[t+39][s+19]=!0,this.state[t+48][s+12]=!0,this.state[t+48][s+13]=!0,this.state[t+48][s+14]=!0,this.state[t+48][s+15]=!0,this.state[t+49][s+12]=!0,this.state[t+49][s+13]=!0,this.state[t+49][s+14]=!0,this.state[t+49][s+15]=!0,this.state[t+50][s+16]=!0,this.state[t+50][s+17]=!0,this.state[t+51][s+16]=!0,this.state[t+51][s+17]=!0,this.state[t+52][s+-58]=!0,this.state[t+52][s+-57]=!0,this.state[t+52][s+-56]=!0,this.state[t+52][s+-55]=!0,this.state[t+52][s+12]=!0,this.state[t+52][s+13]=!0,this.state[t+52][s+14]=!0,this.state[t+52][s+15]=!0,this.state[t+53][s+-58]=!0,this.state[t+53][s+-57]=!0,this.state[t+53][s+-56]=!0,this.state[t+53][s+-55]=!0,this.state[t+53][s+12]=!0,this.state[t+53][s+13]=!0,this.state[t+53][s+14]=!0,this.state[t+53][s+15]=!0,this.state[t+54][s+-58]=!0,this.state[t+54][s+-57]=!0,this.state[t+54][s+-56]=!0,this.state[t+54][s+-55]=!0,this.state[t+55][s+-58]=!0,this.state[t+55][s+-57]=!0,this.state[t+55][s+-56]=!0,this.state[t+55][s+-55]=!0,this.state[t+64][s+-22]=!0,this.state[t+64][s+-21]=!0,this.state[t+64][s+-18]=!0,this.state[t+64][s+-17]=!0,this.state[t+64][s+-4]=!0,this.state[t+64][s+-3]=!0,this.state[t+64][s+0]=!0,this.state[t+64][s+1]=!0,this.state[t+65][s+-22]=!0,this.state[t+65][s+-21]=!0,this.state[t+65][s+-18]=!0,this.state[t+65][s+-17]=!0,this.state[t+65][s+-4]=!0,this.state[t+65][s+-3]=!0,this.state[t+65][s+0]=!0,this.state[t+65][s+1]=!0,this.state[t+66][s+-24]=!0,this.state[t+66][s+-23]=!0,this.state[t+66][s+-4]=!0,this.state[t+66][s+-3]=!0,this.state[t+66][s+0]=!0,this.state[t+66][s+1]=!0,this.state[t+67][s+-24]=!0,this.state[t+67][s+-23]=!0,this.state[t+67][s+-4]=!0,this.state[t+67][s+-3]=!0,this.state[t+67][s+0]=!0,this.state[t+67][s+1]=!0,this.state[t+68][s+-42]=!0,this.state[t+68][s+-41]=!0,this.state[t+68][s+-40]=!0,this.state[t+68][s+-39]=!0,this.state[t+68][s+-22]=!0,this.state[t+68][s+-21]=!0,this.state[t+68][s+-16]=!0,this.state[t+68][s+-15]=!0,this.state[t+68][s+-2]=!0,this.state[t+68][s+-1]=!0,this.state[t+69][s+-42]=!0,this.state[t+69][s+-41]=!0,this.state[t+69][s+-40]=!0,this.state[t+69][s+-39]=!0,this.state[t+69][s+-22]=!0,this.state[t+69][s+-21]=!0,this.state[t+69][s+-16]=!0,this.state[t+69][s+-15]=!0,this.state[t+69][s+-2]=!0,this.state[t+69][s+-1]=!0,this.state[t+70][s+-42]=!0,this.state[t+70][s+-41]=!0,this.state[t+70][s+-40]=!0,this.state[t+70][s+-39]=!0,this.state[t+70][s+-18]=!0,this.state[t+70][s+-17]=!0,this.state[t+70][s+-16]=!0,this.state[t+70][s+-15]=!0,this.state[t+70][s+-14]=!0,this.state[t+70][s+-13]=!0,this.state[t+71][s+-42]=!0,this.state[t+71][s+-41]=!0,this.state[t+71][s+-40]=!0,this.state[t+71][s+-39]=!0,this.state[t+71][s+-18]=!0,this.state[t+71][s+-17]=!0,this.state[t+71][s+-16]=!0,this.state[t+71][s+-15]=!0,this.state[t+71][s+-14]=!0,this.state[t+71][s+-13]=!0,this.state[t+84][s+-26]=!0,this.state[t+84][s+-25]=!0,this.state[t+84][s+-24]=!0,this.state[t+84][s+-23]=!0,this.state[t+85][s+-26]=!0,this.state[t+85][s+-25]=!0,this.state[t+85][s+-24]=!0,this.state[t+85][s+-23]=!0,this.state[t+86][s+-26]=!0,this.state[t+86][s+-25]=!0,this.state[t+86][s+-24]=!0,this.state[t+86][s+-23]=!0,this.state[t+87][s+-26]=!0,this.state[t+87][s+-25]=!0,this.state[t+87][s+-24]=!0,this.state[t+87][s+-23]=!0}}function Explorer(t){function s(){requestAnimationFrame(s),e.renderer.render(e.scene,e.camera)}this.$ctnr=t,this.width=Math.round(this.$ctnr.width()),this.height=Math.round(this.$ctnr.height());var e=this;this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(35,this.width/this.height,.1,1e3),this.plight=new THREE.PointLight(16768494,.9,300),this.plight.castShadow=!0,this.camera.add(this.plight);var i=new THREE.ColladaLoader;i.load("./obstacle.dae",function(t){e.scene.obs=t.scene,e.scene.add(e.scene.obs),e.scene.obs.position.z=-20}),this.renderer=new THREE.WebGLRenderer({alpha:!0,precision:"highp"}),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(12303291,1),this.$ctnr.append(this.renderer.domElement),s()}var TID=void 0,animate=function(){TID&&clearInterval(TID);var t=new Model(Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random()),s=$("body");TID=setInterval(function(){var e=hslToRgb(t.x,t.y,.75);s.css("background-color",e),movept(t.x,t.y),t.step(.001)},1)};THREE.ColladaLoader=function(){function t(t,s,i,a){var h=0;if(document.implementation&&document.implementation.createDocument){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0===r.status||200===r.status)if(r.responseXML)zs=s,e(r.responseXML,void 0,t);else if(r.responseText){zs=s;var n=new DOMParser,o=n.parseFromString(r.responseText,"application/xml");e(o,void 0,t)}else faillCallback?a():console.error("ColladaLoader: Empty or non-existing file ("+t+")")}else 3===r.readyState&&i&&(0===h&&(h=r.getResponseHeader("Content-Length")),i({total:h,loaded:r.responseText.length}))},r.open("GET",t,!0),r.send(null)}else alert("Don't know how to parse XML!")}function e(t,s,e){if(Ps=t,s=s||zs,void 0!==e){var i=e.split("/");i.pop(),Ls=(i.length<1?".":i.join("/"))+"/"}a(),ks(),Gs=h("library_images image",_,"image"),$s=h("library_materials material",J,"material"),Qs=h("library_effects effect",es,"effect"),Bs=h("library_geometries geometry",P,"geometry"),Js=h("library_cameras camera",os,"camera"),Ws=h("library_lights light",ls,"light"),Zs=h("library_controllers controller",H,"controller"),Ys=h("library_animations animation",as,"animation"),Us=h("library_visual_scenes visual_scene",O,"visual_scene"),qs=h("library_kinematics_models kinematics_model",us,"kinematics_model"),Xs=[],Ds=[],js=r(),Vs=new THREE.Group;for(var o=0;o<js.nodes.length;o++)Vs.add(x(js.nodes[o]));Vs.scale.multiplyScalar(se),c(),Ss=n(),b();var l={scene:Vs,morphs:Xs,skins:Ds,animations:Is,kinematics:Os,dae:{images:Gs,materials:$s,cameras:Js,lights:Ws,effects:Qs,geometries:Bs,controllers:Zs,animations:Ys,visualScenes:Us,visualScene:js,scene:js,kinematicsModels:qs,kinematicsModel:Ss}};return s&&s(l),l}function i(t){Ks=t}function a(){var t=Ps.querySelectorAll("asset"),s=t[0];if(s&&s.childNodes)for(var e=0;e<s.childNodes.length;e++){var i=s.childNodes[e];switch(i.nodeName){case"unit":var a=i.getAttribute("meter");a&&(se=parseFloat(a));break;case"up_axis":ee=i.textContent.charAt(0)}}}function h(t,s,e){for(var i=Ps.querySelectorAll(t),a={},h=0,r=i.length,n=0;r>n;n++){var o=i[n],c=(new s).parse(o);c.id&&0!==c.id.length||(c.id=e+h++),a[c.id]=c}return a}function r(){var t=Ps.querySelectorAll("scene instance_visual_scene")[0];if(t){var s=t.getAttribute("url").replace(/^#/,"");return Us[s.length>0?s:"visual_scene0"]}return null}function n(){var t=Ps.querySelectorAll("instance_kinematics_model")[0];if(t){var s=t.getAttribute("url").replace(/^#/,"");return qs[s.length>0?s:"kinematics_model0"]}return null}function c(){Is=[],l(Vs)}function l(t){var s=js.getChildById(t.colladaId,!0),e=null;if(s&&s.keys){e={fps:60,hierarchy:[{node:s,keys:s.keys,sids:s.sids}],node:t,name:"animation_"+t.name,length:0},Is.push(e);for(var i=0,a=s.keys.length;a>i;i++)e.length=Math.max(e.length,s.keys[i].time)}else e={hierarchy:[{keys:[],sids:[]}]};for(var i=0,a=t.children.length;a>i;i++)for(var h=l(t.children[i]),r=0,n=h.hierarchy.length;n>r;r++)e.hierarchy.push({keys:[],sids:[]});return e}function d(){var t,s=1e6,e=-s,i=0;for(var a in Ys){var h=Ys[a];t=t||h.id;for(var r=0;r<h.sampler.length;r++){var n=h.sampler[r];n.create(),s=Math.min(s,n.startTime),e=Math.max(e,n.endTime),i=Math.max(i,n.input.length)}}return{start:s,end:e,frames:i,ID:t}}function u(t,s){var e=s instanceof L?Zs[s.url]:s;if(!e||!e.morph)return void console.log("could not find morph controller!");for(var i=e.morph,a=0;a<i.targets.length;a++){var h=i.targets[a],r=Bs[h];if(r.mesh&&r.mesh.primitives&&r.mesh.primitives.length){var n=r.mesh.primitives[0].geometry;n.vertices.length===t.vertices.length&&t.morphTargets.push({name:"target_1",vertices:n.vertices})}}t.morphTargets.push({name:"target_Z",vertices:t.vertices})}function p(t,s,e,i){if(t.world=t.world||new THREE.Matrix4,t.localworld=t.localworld||new THREE.Matrix4,t.world.copy(t.matrix),t.localworld.copy(t.matrix),t.channels&&t.channels.length){var a=t.channels[0],h=a.sampler.output[e];h instanceof THREE.Matrix4&&(t.world.copy(h),t.localworld.copy(h),0===e&&t.matrix.copy(h))}i&&t.world.multiplyMatrices(i,t.world),s.push(t);for(var r=0;r<t.nodes.length;r++)p(t.nodes[r],s,e,t.world)}function f(t,s){for(var e=0;e<t.length;e++){var i=t[e],a=-1;if("JOINT"==i.type){for(var h=0;h<s.joints.length;h++)if(i.sid===s.joints[h]){a=h;break}if(a>=0){var r=s.invBindMatrices[a];i.invBindMatrix=r,i.skinningMatrix=new THREE.Matrix4,i.skinningMatrix.multiplyMatrices(i.world,r),i.animatrix=new THREE.Matrix4,i.animatrix.copy(i.localworld),i.weights=[];for(var h=0;h<s.weights.length;h++)for(var n=0;n<s.weights[h].length;n++){var o=s.weights[h][n];o.joint===a&&i.weights.push(o)}}else console.warn("ColladaLoader: Could not find joint '"+i.sid+"'."),i.skinningMatrix=new THREE.Matrix4,i.weights=[]}}}function m(t){var s=[],e=function(t,s,i){var a={};a.name=s.sid,a.parent=t,a.matrix=s.matrix;var h=[new THREE.Vector3,new THREE.Quaternion,new THREE.Vector3];a.matrix.decompose(h[0],h[1],h[2]),a.pos=[h[0].x,h[0].y,h[0].z],a.scl=[h[2].x,h[2].y,h[2].z],a.rotq=[h[1].x,h[1].y,h[1].z,h[1].w],i.push(a);for(var r in s.nodes)e(s.sid,s.nodes[r],i)};return e(-1,t,s),s}function g(t,e,i){var a=[];p(e,a,-1),f(a,i.skin),v=new THREE.Vector3;for(var h=[],r=0;r<t.vertices.length;r++)h.push(new THREE.Vector3);for(r=0;r<a.length;r++)if("JOINT"==a[r].type)for(j=0;j<a[r].weights.length;j++)w=a[r].weights[j],vidx=w.index,weight=w.weight,o=t.vertices[vidx],s=h[vidx],v.x=o.x,v.y=o.y,v.z=o.z,v.applyMatrix4(a[r].skinningMatrix),s.x+=v.x*weight,s.y+=v.y*weight,s.z+=v.z*weight;for(var r=0;r<t.vertices.length;r++)t.vertices[r]=h[r]}function y(t,s,e){var i=Zs[s.url];if(e=void 0!==e?e:40,!i||!i.skin)return void console.log("ColladaLoader: Could not find skin controller.");if(!s.skeleton||!s.skeleton.length)return void console.log("ColladaLoader: Could not find the skeleton for the skin. ");for(var a=d(),h=js.getChildById(s.skeleton[0],!0)||js.getChildBySid(s.skeleton[0],!0),r=m(h),n=i.skin.joints,o=[],c=0;c<n.length;c++)for(var l=0;l<r.length;l++)r[l].name===n[c]&&(o[c]=r[l]);for(var c=0;c<o.length;c++)for(var l=0;l<o.length;l++)o[c].parent===o[l].name&&(o[c].parent=l);var c,l,u;for(new THREE.Vector3,c=0;c<t.vertices.length;c++)t.vertices[c].applyMatrix4(i.skin.bindShapeMatrix);for(var v=[],y=[],w=i.skin.weights,c=0;c<w.length;c++){var b=new THREE.Vector4(w[c][0]?w[c][0].joint:0,w[c][1]?w[c][1].joint:0,w[c][2]?w[c][2].joint:0,w[c][3]?w[c][3].joint:0),u=new THREE.Vector4(w[c][0]?w[c][0].weight:0,w[c][1]?w[c][1].weight:0,w[c][2]?w[c][2].weight:0,w[c][3]?w[c][3].weight:0);v.push(b),y.push(u)}t.skinIndices=v,t.skinWeights=y,t.bones=o;for(var x={name:a.ID,fps:30,length:a.frames/30,hierarchy:[]},l=0;l<o.length;l++)x.hierarchy.push({parent:o[l].parent,name:o[l].name,keys:[]});for(console.log("ColladaLoader:",a.ID+" has "+o.length+" bones."),g(t,h,i),e=0;e<a.frames;e++){var N=[];p(h,N,e),f(N,i.skin);for(var c=0;c<N.length;c++)for(var l=0;l<x.hierarchy.length;l++)if(x.hierarchy[l].name===N[c].sid){var T={};T.time=e/30,T.matrix=N[c].animatrix,0===e&&(N[c].matrix=T.matrix);var E=[new THREE.Vector3,new THREE.Quaternion,new THREE.Vector3];T.matrix.decompose(E[0],E[1],E[2]),T.pos=[E[0].x,E[0].y,E[0].z],T.scl=[E[2].x,E[2].y,E[2].z],T.rot=E[1],x.hierarchy[l].keys.push(T)}t.animation=x}}function b(){if(Ss&&0===Ss.joints.length)return void(Os=void 0);var t={},s=function(s,e){var i=e.getAttribute("id"),a=js.getChildById(i,!0),h=Ss.joints[s];Vs.traverse(function(e){e.colladaId==i&&(t[s]={node:e,transforms:a.transforms,joint:h,position:h.zeroPosition})})};Os={joints:Ss&&Ss.joints,getJointValue:function(s){var e=t[s];return e?e.position:void console.log("getJointValue: joint "+s+" doesn't exist")},setJointValue:function(s,e){var a=t[s];if(a){var h=a.joint;if(e>h.limits.max||e<h.limits.min)console.log("setJointValue: joint "+s+" value "+e+" outside of limits (min: "+h.limits.min+", max: "+h.limits.max+")");else if(h["static"])console.log("setJointValue: joint "+s+" is static");else{var r=a.node,n=h.axis,o=a.transforms,c=new THREE.Matrix4;
for(i=0;i<o.length;i++){var l=o[i];if(l.sid&&-1!==l.sid.indexOf("joint"+s))switch(h.type){case"revolute":c.multiply(d.makeRotationAxis(n,THREE.Math.degToRad(e)));break;case"prismatic":c.multiply(d.makeTranslation(n.x*e,n.y*e,n.z*e));break;default:console.warn("setJointValue: unknown joint type: "+h.type)}else{var d=new THREE.Matrix4;switch(l.type){case"matrix":c.multiply(l.obj);break;case"translate":c.multiply(d.makeTranslation(l.obj.x,l.obj.y,l.obj.z));break;case"rotate":c.multiply(d.makeRotationAxis(l.obj,l.angle))}}}var u=c.elements,p=Array.prototype.slice.call(u),f=[p[0],p[4],p[8],p[12],p[1],p[5],p[9],p[13],p[2],p[6],p[10],p[14],p[3],p[7],p[11],p[15]];r.matrix.set.apply(r.matrix,f),r.matrix.decompose(r.position,r.quaternion,r.scale)}}else console.log("setJointValue: joint "+s+" doesn't exist")}};var e=Ps.querySelector("scene instance_kinematics_scene");if(e)for(var i=0;i<e.childNodes.length;i++){var a=e.childNodes[i];if(1==a.nodeType)switch(a.nodeName){case"bind_joint_axis":var h=a.getAttribute("target").split("/").pop(),r=a.querySelector("axis param").textContent,n=parseInt(r.split("joint").pop().split(".")[0]),o=Ps.querySelector('[sid="'+h+'"]');if(o){var c=o.parentElement;s(n,c)}}}}function x(t){var s,e,i,a,h=new THREE.Object3D,r=!1;for(i=0;i<t.controllers.length;i++){var n=Zs[t.controllers[i].url];switch(n.type){case"skin":if(Bs[n.skin.source]){var o=new D;o.url=n.skin.source,o.instance_material=t.controllers[i].instance_material,t.geometries.push(o),r=!0,s=t.controllers[i]}else if(Zs[n.skin.source]){var c=Zs[n.skin.source];if(e=c,c.morph&&Bs[c.morph.source]){var o=new D;o.url=c.morph.source,o.instance_material=t.controllers[i].instance_material,t.geometries.push(o)}}break;case"morph":if(Bs[n.morph.source]){var o=new D;o.url=n.morph.source,o.instance_material=t.controllers[i].instance_material,t.geometries.push(o),e=t.controllers[i]}console.log("ColladaLoader: Morph-controller partially supported.")}}var l={};for(i=0;i<t.geometries.length;i++){var d,p=t.geometries[i],f=p.instance_material,m=Bs[p.url],g={},v=[],w=0;if(m){if(!m.mesh||!m.mesh.primitives)continue;if(0===h.name.length&&(h.name=m.id),f)for(a=0;a<f.length;a++){var b=f[a],N=$s[b.target],T=N.instance_effect.url,E=Qs[T].shader,k=E.material;if(m.doubleSided){if(!(b.symbol in l)){var M=k.clone();M.side=THREE.DoubleSide,l[b.symbol]=M}k=l[b.symbol]}k.opacity=k.opacity?k.opacity:1,g[b.symbol]=w,v.push(k),d=k,d.name=null===N.name||""===N.name?N.id:N.name,w++}var A,R=d||new THREE.MeshLambertMaterial({color:14540253,side:m.doubleSided?THREE.DoubleSide:THREE.FrontSide}),C=m.mesh.geometry3js;if(w>1)for(R=new THREE.MeshFaceMaterial(v),a=0;a<C.faces.length;a++){var _=C.faces[a];_.materialIndex=g[_.daeMaterial]}void 0!==s?(y(C,s),C.morphTargets.length>0?(R.morphTargets=!0,R.skinning=!1):(R.morphTargets=!1,R.skinning=!0),A=new THREE.SkinnedMesh(C,R,!1),A.name="skin_"+Ds.length,Ds.push(A)):void 0!==e?(u(C,e),R.morphTargets=!0,A=new THREE.Mesh(C,R),A.name="morph_"+Xs.length,Xs.push(A)):A=C.isLineStrip===!0?new THREE.Line(C):new THREE.Mesh(C,R),h.add(A)}}for(i=0;i<t.cameras.length;i++){var H=t.cameras[i],j=Js[H.url],S=new THREE.PerspectiveCamera(j.yfov,parseFloat(j.aspect_ratio),parseFloat(j.znear),parseFloat(j.zfar));h.add(S)}for(i=0;i<t.lights.length;i++){var I=null,O=t.lights[i],U=Ws[O.url];if(U&&U.technique){var q,L=U.color.getHex(),X=U.intensity,P=U.distance,V=U.falloff_angle;switch(U.technique){case"directional":I=new THREE.DirectionalLight(L,X,P),I.position.set(0,0,1);break;case"point":I=new THREE.PointLight(L,X,P);break;case"spot":I=new THREE.SpotLight(L,X,P,V,q),I.position.set(0,0,1);break;case"ambient":I=new THREE.AmbientLight(L)}}I&&h.add(I)}if(h.name=t.name||t.id||"",h.colladaId=t.id||"",h.layer=t.layer||"",h.matrix=t.matrix,h.matrix.decompose(h.position,h.quaternion,h.scale),te.centerGeometry&&h.geometry){var z=h.geometry.center();z.multiply(h.scale),z.applyQuaternion(h.quaternion),h.position.sub(z)}for(i=0;i<t.nodes.length;i++)h.add(x(t.nodes[i],t));return h}function N(t){for(var s=Ps.querySelectorAll("library_nodes node"),e=0;e<s.length;e++){var i=s[e].attributes.getNamedItem("id");if(i&&i.value===t)return s[e]}return void 0}function T(t){var s=[],e=1e6,i=-1e6;for(var a in Ys)for(var h=Ys[a],r=0;r<h.channel.length;r++){var n=h.channel[r],o=h.sampler[r],a=n.target.split("/")[0];a==t.id&&(o.create(),n.sampler=o,e=Math.min(e,o.startTime),i=Math.max(i,o.endTime),s.push(n))}return s.length&&(t.startTime=e,t.endTime=i),s}function E(t){if(t.channels&&t.channels.length){for(var s=[],e=[],i=0,a=t.channels.length;a>i;i++){var h,r=t.channels[i],n=r.fullSid,o=r.sampler,c=o.input,l=t.getTransformBySid(r.sid);if(r.arrIndices){h=[];for(var d=0,u=r.arrIndices.length;u>d;d++)h[d]=_s(r.arrIndices[d])}else h=Hs(r.member);if(l){-1===e.indexOf(n)&&e.push(n);for(var d=0,u=c.length;u>d;d++){var p=c[d],f=o.getData(l.type,d,h),m=k(s,p);if(!m){m=new ns(p);var g=M(s,p);s.splice(-1===g?s.length:g,0,m)}m.addTarget(n,l,h,f)}}else console.log('Could not find transform "'+r.sid+'" in node '+t.id)}for(var i=0;i<e.length;i++)for(var v=e[i],d=0;d<s.length;d++){var m=s[d];m.hasTarget(v)||A(s,m,d,v)}t.keys=s,t.sids=e}}function k(t,s){for(var e=null,i=0,a=t.length;a>i&&null===e;i++){var h=t[i];if(h.time===s)e=h;else if(h.time>s)break}return e}function M(t,s){for(var e=-1,i=0,a=t.length;a>i&&-1===e;i++){var h=t[i];h.time>=s&&(e=i)}return e}function A(t,s,e,i){var a=C(t,i,e?e-1:0),h=R(t,i,e+1);if(a&&h){var r,n=(s.time-a.time)/(h.time-a.time),o=a.getTarget(i),c=h.getTarget(i).data,l=o.data;if("matrix"===o.type)r=l;else if(l.length){r=[];for(var d=0;d<l.length;++d)r[d]=l[d]+(c[d]-l[d])*n}else r=l+(c-l)*n;s.addTarget(i,o.transform,o.member,r)}}function R(t,s,e){for(;e<t.length;e++){var i=t[e];if(i.hasTarget(s))return i}return null}function C(t,s,e){for(e=e>=0?e:e+t.length;e>=0;e--){var i=t[e];if(i.hasTarget(s))return i}return null}function _(){this.id="",this.init_from=""}function H(){this.id="",this.name="",this.type="",this.skin=null,this.morph=null}function S(){this.method=null,this.source=null,this.targets=null,this.weights=null}function I(){this.source="",this.bindShapeMatrix=null,this.invBindMatrices=[],this.joints=[],this.weights=[]}function O(){this.id="",this.name="",this.nodes=[],this.scene=new THREE.Group}function U(){this.id="",this.name="",this.sid="",this.nodes=[],this.controllers=[],this.transforms=[],this.geometries=[],this.channels=[],this.matrix=new THREE.Matrix4}function q(){this.sid="",this.type="",this.data=[],this.obj=null}function L(){this.url="",this.skeleton=[],this.instance_material=[]}function X(){this.symbol="",this.target=""}function D(){this.url="",this.instance_material=[]}function P(){this.id="",this.mesh=null}function V(t){this.geometry=t.id,this.primitives=[],this.vertices=null,this.geometry3js=null}function z(){this.material="",this.count=0,this.inputs=[],this.vcount=null,this.p=[],this.geometry=new THREE.Geometry}function F(){z.call(this),this.vcount=[]}function G(){z.call(this),this.vcount=1}function Y(){z.call(this),this.vcount=3}function Z(){this.source="",this.count=0,this.stride=0,this.params=[]}function B(){this.input={}}function $(){this.semantic="",this.offset=0,this.source="",this.set=0}function Q(t){this.id=t,this.type=null}function J(){this.id="",this.name="",this.instance_effect=null}function W(){this.color=new THREE.Color,this.color.setRGB(Math.random(),Math.random(),Math.random()),this.color.a=1,this.texture=null,this.texcoord=null,this.texOpts=null}function K(t,s){this.type=t,this.effect=s,this.material=null}function ts(t){this.effect=t,this.init_from=null,this.format=null}function ss(t){this.effect=t,this.source=null,this.wrap_s=null,this.wrap_t=null,this.minfilter=null,this.magfilter=null,this.mipfilter=null}function es(){this.id="",this.name="",this.shader=null,this.surface={},this.sampler={}}function is(){this.url=""}function as(){this.id="",this.name="",this.source={},this.sampler=[],this.channel=[]}function hs(t){this.animation=t,this.source="",this.target="",this.fullSid=null,this.sid=null,this.dotSyntax=null,this.arrSyntax=null,this.arrIndices=null,this.member=null}function rs(t){this.id="",this.animation=t,this.inputs=[],this.input=null,this.output=null,this.strideOut=null,this.interpolation=null,this.startTime=null,this.endTime=null,this.duration=0}function ns(t){this.targets=[],this.time=t}function os(){this.id="",this.name="",this.technique=""}function cs(){this.url=""}function ls(){this.id="",this.name="",this.technique=""}function ds(){this.url=""}function us(){this.id="",this.name="",this.joints=[],this.links=[]}function ps(){this.sid="",this.name="",this.axis=new THREE.Vector3,this.limits={min:0,max:0},this.type="",this["static"]=!1,this.zeroPosition=0,this.middlePosition=0}function fs(){this.sid="",this.name="",this.transforms=[],this.attachments=[]}function ms(){this.joint="",this.transforms=[],this.links=[]}function gs(t){var s=t.getAttribute("id");return void 0!=Fs[s]?Fs[s]:(Fs[s]=new Q(s).parse(t),Fs[s])}function vs(t){for(var s=bs(t),e=[],i=0,a=s.length;a>i;i++)e.push("true"===s[i]||"1"===s[i]?!0:!1);return e}function ys(t){for(var s=bs(t),e=[],i=0,a=s.length;a>i;i++)e.push(parseFloat(s[i]));return e}function ws(t){for(var s=bs(t),e=[],i=0,a=s.length;a>i;i++)e.push(parseInt(s[i],10));return e}function bs(t){return t.length>0?xs(t).split(/\s+/):[]}function xs(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}function Ns(t,s,e){return t.hasAttribute(s)?parseInt(t.getAttribute(s),10):e}function Ts(t,s){loader=new THREE.ImageLoader,loader.load(s,function(s){t.image=s,t.needsUpdate=!0})}function Es(t,s){t.doubleSided=!1;var e=s.querySelectorAll("extra double_sided")[0];e&&e&&1===parseInt(e.textContent,10)&&(t.doubleSided=!0)}function ks(){if(te.convertUpAxis!==!0||ee===te.upAxis)ie=null;else switch(ee){case"X":ie="Y"===te.upAxis?"XtoY":"XtoZ";break;case"Y":ie="X"===te.upAxis?"YtoX":"YtoZ";break;case"Z":ie="X"===te.upAxis?"ZtoX":"ZtoY"}}function Ms(t,s){if(te.convertUpAxis===!0&&ee!==te.upAxis)switch(ie){case"XtoY":var e=t[0];t[0]=s*t[1],t[1]=e;break;case"XtoZ":var e=t[2];t[2]=t[1],t[1]=t[0],t[0]=e;break;case"YtoX":var e=t[0];t[0]=t[1],t[1]=s*e;break;case"YtoZ":var e=t[1];t[1]=s*t[2],t[2]=e;break;case"ZtoX":var e=t[0];t[0]=t[1],t[1]=t[2],t[2]=e;break;case"ZtoY":var e=t[1];t[1]=t[2],t[2]=s*e}}function As(t,s){if(te.convertUpAxis!==!0||ee===te.upAxis)return s;switch(t){case"X":s="XtoY"===ie?-1*s:s;break;case"Y":s="YtoZ"===ie||"YtoX"===ie?-1*s:s;break;case"Z":s="ZtoY"===ie?-1*s:s}return s}function Rs(t,s){var e=[t[s],t[s+1],t[s+2]];return Ms(e,-1),new THREE.Vector3(e[0],e[1],e[2])}function Cs(t){if(te.convertUpAxis){var s=[t[0],t[4],t[8]];Ms(s,-1),t[0]=s[0],t[4]=s[1],t[8]=s[2],s=[t[1],t[5],t[9]],Ms(s,-1),t[1]=s[0],t[5]=s[1],t[9]=s[2],s=[t[2],t[6],t[10]],Ms(s,-1),t[2]=s[0],t[6]=s[1],t[10]=s[2],s=[t[0],t[1],t[2]],Ms(s,-1),t[0]=s[0],t[1]=s[1],t[2]=s[2],s=[t[4],t[5],t[6]],Ms(s,-1),t[4]=s[0],t[5]=s[1],t[6]=s[2],s=[t[8],t[9],t[10]],Ms(s,-1),t[8]=s[0],t[9]=s[1],t[10]=s[2],s=[t[3],t[7],t[11]],Ms(s,-1),t[3]=s[0],t[7]=s[1],t[11]=s[2]}return(new THREE.Matrix4).set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function _s(t){if(t>-1&&3>t){var s=["X","Y","Z"],e={X:0,Y:1,Z:2};t=Hs(s[t]),t=e[t]}return t}function Hs(t){if(te.convertUpAxis)switch(t){case"X":switch(ie){case"XtoY":case"XtoZ":case"YtoX":t="Y";break;case"ZtoX":t="Z"}break;case"Y":switch(ie){case"XtoY":case"YtoX":case"ZtoX":t="X";break;case"XtoZ":case"YtoZ":case"ZtoY":t="Z"}break;case"Z":switch(ie){case"XtoZ":t="X";break;case"YtoZ":case"ZtoX":case"ZtoY":t="Y"}}return t}var js,Ss,Is,Os,Us,qs,Ls,Xs,Ds,Ps=null,Vs=null,zs=null,Fs={},Gs={},Ys={},Zs={},Bs={},$s={},Qs={},Js={},Ws={},Ks=THREE.SmoothShading,te={centerGeometry:!1,convertUpAxis:!1,subdivideFaces:!0,upAxis:"Y",defaultEnvMap:null},se=1,ee="Y",ie=null;return _.prototype.parse=function(t){this.id=t.getAttribute("id");for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];"init_from"===e.nodeName&&(this.init_from=e.textContent)}return this},H.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.type="none";for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];switch(e.nodeName){case"skin":this.skin=(new I).parse(e),this.type=e.nodeName;break;case"morph":this.morph=(new S).parse(e),this.type=e.nodeName}}return this},S.prototype.parse=function(t){var s,e={},i=[];for(this.method=t.getAttribute("method"),this.source=t.getAttribute("source").replace(/^#/,""),s=0;s<t.childNodes.length;s++){var a=t.childNodes[s];if(1==a.nodeType)switch(a.nodeName){case"source":var h=(new Q).parse(a);e[h.id]=h;break;case"targets":i=this.parseInputs(a);break;default:console.log(a.nodeName)}}for(s=0;s<i.length;s++){var r=i[s],h=e[r.source];switch(r.semantic){case"MORPH_TARGET":this.targets=h.read();break;case"MORPH_WEIGHT":this.weights=h.read()}}return this},S.prototype.parseInputs=function(t){for(var s=[],e=0;e<t.childNodes.length;e++){var i=t.childNodes[e];if(1==i.nodeType)switch(i.nodeName){case"input":s.push((new $).parse(i))}}return s},I.prototype.parse=function(t){var s,e,i={};this.source=t.getAttribute("source").replace(/^#/,""),this.invBindMatrices=[],this.joints=[],this.weights=[];for(var a=0;a<t.childNodes.length;a++){var h=t.childNodes[a];if(1==h.nodeType)switch(h.nodeName){case"bind_shape_matrix":var r=ys(h.textContent);this.bindShapeMatrix=Cs(r);break;case"source":var n=(new Q).parse(h);i[n.id]=n;break;case"joints":s=h;break;case"vertex_weights":e=h;break;default:console.log(h.nodeName)}}return this.parseJoints(s,i),this.parseWeights(e,i),this},I.prototype.parseJoints=function(t,s){for(var e=0;e<t.childNodes.length;e++){var i=t.childNodes[e];if(1==i.nodeType)switch(i.nodeName){case"input":var a=(new $).parse(i),h=s[a.source];"JOINT"===a.semantic?this.joints=h.read():"INV_BIND_MATRIX"===a.semantic&&(this.invBindMatrices=h.read())}}},I.prototype.parseWeights=function(t,s){for(var e,i,a=[],h=0;h<t.childNodes.length;h++){var r=t.childNodes[h];if(1==r.nodeType)switch(r.nodeName){case"input":a.push((new $).parse(r));break;case"v":e=ws(r.textContent);break;case"vcount":i=ws(r.textContent)}}for(var n=0,h=0;h<i.length;h++){for(var o=i[h],c=[],l=0;o>l;l++){for(var d={},u=0;u<a.length;u++){var p=a[u],f=e[n+p.offset];switch(p.semantic){case"JOINT":d.joint=f;break;case"WEIGHT":d.weight=s[p.source].data[f]}}c.push(d),n+=a.length}for(var l=0;l<c.length;l++)c[l].index=h;this.weights.push(c)}},O.prototype.getChildById=function(t,s){for(var e=0;e<this.nodes.length;e++){var i=this.nodes[e].getChildById(t,s);if(i)return i}return null},O.prototype.getChildBySid=function(t,s){for(var e=0;e<this.nodes.length;e++){var i=this.nodes[e].getChildBySid(t,s);if(i)return i}return null},O.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.nodes=[];for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"node":this.nodes.push((new U).parse(e))}}return this},U.prototype.getChannelForTransform=function(t){for(var s=0;s<this.channels.length;s++){var e,i,a=this.channels[s],h=a.target.split("/"),r=(h.shift(),h.shift()),n=r.indexOf(".")>=0,o=r.indexOf("(")>=0;if(n)h=r.split("."),r=h.shift(),i=h.shift();else if(o){e=r.split("("),r=e.shift();for(var c=0;c<e.length;c++)e[c]=parseInt(e[c].replace(/\)/,""))}if(r===t)return a.info={sid:r,dotSyntax:n,arrSyntax:o,arrIndices:e},a}return null},U.prototype.getChildById=function(t,s){if(this.id===t)return this;if(s)for(var e=0;e<this.nodes.length;e++){var i=this.nodes[e].getChildById(t,s);if(i)return i}return null},U.prototype.getChildBySid=function(t,s){if(this.sid===t)return this;if(s)for(var e=0;e<this.nodes.length;e++){var i=this.nodes[e].getChildBySid(t,s);if(i)return i}return null},U.prototype.getTransformBySid=function(t){for(var s=0;s<this.transforms.length;s++)if(this.transforms[s].sid===t)return this.transforms[s];return null},U.prototype.parse=function(t){var s;this.id=t.getAttribute("id"),this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.type=t.getAttribute("type"),this.layer=t.getAttribute("layer"),this.type="JOINT"===this.type?this.type:"NODE",this.nodes=[],this.transforms=[],this.geometries=[],this.cameras=[],this.lights=[],this.controllers=[],this.matrix=new THREE.Matrix4;for(var e=0;e<t.childNodes.length;e++){var i=t.childNodes[e];if(1==i.nodeType)switch(i.nodeName){case"node":this.nodes.push((new U).parse(i));break;case"instance_camera":this.cameras.push((new cs).parse(i));break;case"instance_controller":this.controllers.push((new L).parse(i));break;case"instance_geometry":this.geometries.push((new D).parse(i));break;case"instance_light":this.lights.push((new ds).parse(i));break;case"instance_node":s=i.getAttribute("url").replace(/^#/,"");var a=N(s);a&&this.nodes.push((new U).parse(a));break;case"rotate":case"translate":case"scale":case"matrix":case"lookat":case"skew":this.transforms.push((new q).parse(i));break;case"extra":break;default:console.log(i.nodeName)}}return this.channels=T(this),E(this),this.updateMatrix(),this},U.prototype.updateMatrix=function(){this.matrix.identity();for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(this.matrix)},q.prototype.parse=function(t){return this.sid=t.getAttribute("sid"),this.type=t.nodeName,this.data=ys(t.textContent),this.convert(),this},q.prototype.convert=function(){switch(this.type){case"matrix":this.obj=Cs(this.data);break;case"rotate":this.angle=THREE.Math.degToRad(this.data[3]);case"translate":Ms(this.data,-1),this.obj=new THREE.Vector3(this.data[0],this.data[1],this.data[2]);break;case"scale":Ms(this.data,1),this.obj=new THREE.Vector3(this.data[0],this.data[1],this.data[2]);break;default:console.log("Can not convert Transform of type "+this.type)}},q.prototype.apply=function(){var t=new THREE.Matrix4;return function(s){switch(this.type){case"matrix":s.multiply(this.obj);break;case"translate":s.multiply(t.makeTranslation(this.obj.x,this.obj.y,this.obj.z));break;case"rotate":s.multiply(t.makeRotationAxis(this.obj,this.angle));break;case"scale":s.scale(this.obj)}}}(),q.prototype.update=function(t,s){var e=["X","Y","Z","ANGLE"];switch(this.type){case"matrix":if(s)if(1===s.length)switch(s[0]){case 0:this.obj.n11=t[0],this.obj.n21=t[1],this.obj.n31=t[2],this.obj.n41=t[3];break;case 1:this.obj.n12=t[0],this.obj.n22=t[1],this.obj.n32=t[2],this.obj.n42=t[3];break;case 2:this.obj.n13=t[0],this.obj.n23=t[1],this.obj.n33=t[2],this.obj.n43=t[3];break;case 3:this.obj.n14=t[0],this.obj.n24=t[1],this.obj.n34=t[2],this.obj.n44=t[3]}else if(2===s.length){var i="n"+(s[0]+1)+(s[1]+1);this.obj[i]=t}else console.log("Incorrect addressing of matrix in transform.");else this.obj.copy(t);break;case"translate":case"scale":switch("[object Array]"===Object.prototype.toString.call(s)&&(s=e[s[0]]),s){case"X":this.obj.x=t;break;case"Y":this.obj.y=t;break;case"Z":this.obj.z=t;break;default:this.obj.x=t[0],this.obj.y=t[1],this.obj.z=t[2]}break;case"rotate":switch("[object Array]"===Object.prototype.toString.call(s)&&(s=e[s[0]]),s){case"X":this.obj.x=t;break;case"Y":this.obj.y=t;break;case"Z":this.obj.z=t;break;case"ANGLE":this.angle=THREE.Math.degToRad(t);break;default:this.obj.x=t[0],this.obj.y=t[1],this.obj.z=t[2],this.angle=THREE.Math.degToRad(t[3])}}},L.prototype.parse=function(t){this.url=t.getAttribute("url").replace(/^#/,""),this.skeleton=[],this.instance_material=[];for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1===e.nodeType)switch(e.nodeName){case"skeleton":this.skeleton.push(e.textContent.replace(/^#/,""));break;case"bind_material":for(var i=e.querySelectorAll("instance_material"),a=0;a<i.length;a++){var h=i[a];this.instance_material.push((new X).parse(h))}break;case"extra":}}return this},X.prototype.parse=function(t){return this.symbol=t.getAttribute("symbol"),this.target=t.getAttribute("target").replace(/^#/,""),this},D.prototype.parse=function(t){this.url=t.getAttribute("url").replace(/^#/,""),this.instance_material=[];for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType&&"bind_material"===e.nodeName){for(var i=e.querySelectorAll("instance_material"),a=0;a<i.length;a++){var h=i[a];this.instance_material.push((new X).parse(h))}break}}return this},P.prototype.parse=function(t){this.id=t.getAttribute("id"),Es(this,t);for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];switch(e.nodeName){case"mesh":this.mesh=new V(this).parse(e);break;case"extra":}}return this},V.prototype.parse=function(t){this.primitives=[];for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];switch(e.nodeName){case"source":gs(e);break;case"vertices":this.vertices=(new B).parse(e);break;case"linestrips":this.primitives.push((new G).parse(e));break;case"triangles":this.primitives.push((new Y).parse(e));break;case"polygons":this.primitives.push((new z).parse(e));break;case"polylist":this.primitives.push((new F).parse(e))}}if(this.geometry3js=new THREE.Geometry,null===this.vertices)return this;for(var i=Fs[this.vertices.input.POSITION.source].data,s=0;s<i.length;s+=3)this.geometry3js.vertices.push(Rs(i,s).clone());for(var s=0;s<this.primitives.length;s++){var a=this.primitives[s];a.setVertices(this.vertices),this.handlePrimitive(a,this.geometry3js)}return this.geometry3js.calcNormals&&(this.geometry3js.computeVertexNormals(),delete this.geometry3js.calcNormals),this},V.prototype.handlePrimitive=function(t,s){if(t instanceof G)return void(s.isLineStrip=!0);var e,i,a,h,r,n,o,c=t.p,l=t.inputs,d=0,u=3,p=0,f=[];for(e=0;e<l.length;e++){a=l[e];var m=a.offset+1;switch(p=m>p?m:p,a.semantic){case"TEXCOORD":f.push(a.set)}}for(var g=0;g<c.length;++g)for(var v=c[g],y=0;y<v.length;){var w=[],b=[],x=null,N=[];for(u=t.vcount?t.vcount.length?t.vcount[d++]:t.vcount:v.length/p,e=0;u>e;e++)for(i=0;i<l.length;i++)switch(a=l[i],n=Fs[a.source],h=v[y+e*p+a.offset],o=n.accessor.params.length,r=h*o,a.semantic){case"VERTEX":w.push(h);break;case"NORMAL":b.push(Rs(n.data,r));break;case"TEXCOORD":x=x||{},void 0===x[a.set]&&(x[a.set]=[]),x[a.set].push(new THREE.Vector2(n.data[r],n.data[r+1]));break;case"COLOR":N.push((new THREE.Color).setRGB(n.data[r],n.data[r+1],n.data[r+2]))}if(0===b.length)if(a=this.vertices.input.NORMAL){n=Fs[a.source],o=n.accessor.params.length;for(var T=0,E=w.length;E>T;T++)b.push(Rs(n.data,w[T]*o))}else s.calcNormals=!0;if(!x&&(x={},a=this.vertices.input.TEXCOORD)){f.push(a.set),n=Fs[a.source],o=n.accessor.params.length;for(var T=0,E=w.length;E>T;T++)r=w[T]*o,void 0===x[a.set]&&(x[a.set]=[]),x[a.set].push(new THREE.Vector2(n.data[r],1-n.data[r+1]))}if(0===N.length&&(a=this.vertices.input.COLOR)){n=Fs[a.source],o=n.accessor.params.length;for(var T=0,E=w.length;E>T;T++)r=w[T]*o,N.push((new THREE.Color).setRGB(n.data[r],n.data[r+1],n.data[r+2]))}var k,M,A=null,R=[];if(3===u)R.push(new THREE.Face3(w[0],w[1],w[2],b,N.length?N:new THREE.Color));else if(4===u)R.push(new THREE.Face3(w[0],w[1],w[3],[b[0].clone(),b[1].clone(),b[3].clone()],N.length?[N[0],N[1],N[3]]:new THREE.Color)),R.push(new THREE.Face3(w[1],w[2],w[3],[b[1].clone(),b[2].clone(),b[3].clone()],N.length?[N[1],N[2],N[3]]:new THREE.Color));else if(u>4&&te.subdivideFaces){var C=N.length?N:new THREE.Color;for(i=1;u-1>i;)R.push(new THREE.Face3(w[0],w[i],w[i+1],[b[0].clone(),b[i++].clone(),b[i].clone()],C))}if(R.length)for(var T=0,E=R.length;E>T;T++)for(A=R[T],A.daeMaterial=t.material,s.faces.push(A),i=0;i<f.length;i++)k=x[f[i]],M=u>4?[k[0],k[T+1],k[T+2]]:4===u?0===T?[k[0],k[1],k[3]]:[k[1].clone(),k[2],k[3].clone()]:[k[0],k[1],k[2]],void 0===s.faceVertexUvs[i]&&(s.faceVertexUvs[i]=[]),s.faceVertexUvs[i].push(M);else console.log("dropped face with vcount "+u+" for geometry with id: "+s.id);y+=p*u}},z.prototype.setVertices=function(t){for(var s=0;s<this.inputs.length;s++)this.inputs[s].source===t.id&&(this.inputs[s].source=t.input.POSITION.source)},z.prototype.parse=function(t){this.material=t.getAttribute("material"),this.count=Ns(t,"count",0);for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];switch(e.nodeName){case"input":this.inputs.push((new $).parse(t.childNodes[s]));break;case"vcount":this.vcount=ws(e.textContent);break;case"p":this.p.push(ws(e.textContent));break;case"ph":console.warn("polygon holes not yet supported!")}}return this},F.prototype=Object.create(z.prototype),F.prototype.constructor=F,G.prototype=Object.create(z.prototype),G.prototype.constructor=G,Y.prototype=Object.create(z.prototype),Y.prototype.constructor=Y,Z.prototype.parse=function(t){this.params=[],this.source=t.getAttribute("source"),this.count=Ns(t,"count",0),this.stride=Ns(t,"stride",0);for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if("param"===e.nodeName){var i={};i.name=e.getAttribute("name"),i.type=e.getAttribute("type"),this.params.push(i)}}return this},B.prototype.parse=function(t){this.id=t.getAttribute("id");for(var s=0;s<t.childNodes.length;s++)if("input"===t.childNodes[s].nodeName){var e=(new $).parse(t.childNodes[s]);this.input[e.semantic]=e}return this},$.prototype.parse=function(t){return this.semantic=t.getAttribute("semantic"),this.source=t.getAttribute("source").replace(/^#/,""),this.set=Ns(t,"set",-1),this.offset=Ns(t,"offset",0),"TEXCOORD"===this.semantic&&this.set<0&&(this.set=0),this},Q.prototype.parse=function(t){this.id=t.getAttribute("id");for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];switch(e.nodeName){case"bool_array":this.data=vs(e.textContent),this.type=e.nodeName;break;case"float_array":this.data=ys(e.textContent),this.type=e.nodeName;break;case"int_array":this.data=ws(e.textContent),this.type=e.nodeName;break;case"IDREF_array":case"Name_array":this.data=bs(e.textContent),this.type=e.nodeName;break;case"technique_common":for(var i=0;i<e.childNodes.length;i++)if("accessor"===e.childNodes[i].nodeName){this.accessor=(new Z).parse(e.childNodes[i]);break}}}return this},Q.prototype.read=function(){var t=[],s=this.accessor.params[0];switch(s.type){case"IDREF":case"Name":case"name":case"float":return this.data;case"float4x4":for(var e=0;e<this.data.length;e+=16){var i=this.data.slice(e,e+16),a=Cs(i);t.push(a)}break;default:console.log("ColladaLoader: Source: Read dont know how to read "+s.type+".")}return t},J.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var s=0;s<t.childNodes.length;s++)if("instance_effect"===t.childNodes[s].nodeName){this.instance_effect=(new is).parse(t.childNodes[s]);break}return this},W.prototype.isColor=function(){return null===this.texture},W.prototype.isTexture=function(){return null!=this.texture},W.prototype.parse=function(t){"transparent"===t.nodeName&&(this.opaque=t.getAttribute("opaque"));for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"color":var i=ys(e.textContent);this.color=new THREE.Color,this.color.setRGB(i[0],i[1],i[2]),this.color.a=i[3];break;case"texture":this.texture=e.getAttribute("texture"),this.texcoord=e.getAttribute("texcoord"),this.texOpts={offsetU:0,offsetV:0,repeatU:1,repeatV:1,wrapU:1,wrapV:1},this.parseTexture(e)}}return this},W.prototype.parseTexture=function(t){if(!t.childNodes)return this;t.childNodes[1]&&"extra"===t.childNodes[1].nodeName&&(t=t.childNodes[1],t.childNodes[1]&&"technique"===t.childNodes[1].nodeName&&(t=t.childNodes[1]));for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];switch(e.nodeName){case"offsetU":case"offsetV":case"repeatU":case"repeatV":this.texOpts[e.nodeName]=parseFloat(e.textContent);break;case"wrapU":case"wrapV":this.texOpts[e.nodeName]="TRUE"===e.textContent.toUpperCase()?1:parseInt(e.textContent);break;default:this.texOpts[e.nodeName]=e.textContent}}return this},K.prototype.parse=function(t){for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"emission":case"diffuse":case"specular":case"transparent":this[e.nodeName]=(new W).parse(e);break;case"bump":var i=e.getAttribute("bumptype");i?"heightfield"===i.toLowerCase()?this.bump=(new W).parse(e):"normalmap"===i.toLowerCase()?this.normal=(new W).parse(e):(console.error("Shader.prototype.parse: Invalid value for attribute 'bumptype' ("+i+") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'"),this.bump=(new W).parse(e)):(console.warn("Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'"),this.bump=(new W).parse(e));break;case"shininess":case"reflectivity":case"index_of_refraction":case"transparency":var a=e.querySelectorAll("float");a.length>0&&(this[e.nodeName]=parseFloat(a[0].textContent))}}return this.create(),this},K.prototype.create=function(){var t={},s=!1;if(void 0!==this.transparency&&void 0!==this.transparent){var e=(this.transparent,(this.transparent.color.r+this.transparent.color.g+this.transparent.color.b)/3*this.transparency);e>0&&(s=!0,t.transparent=!0,t.opacity=1-e)}var i={diffuse:"map",ambient:"lightMap",specular:"specularMap",emission:"emissionMap",bump:"bumpMap",normal:"normalMap"};for(var a in this)switch(a){case"ambient":case"emission":case"diffuse":case"specular":case"bump":case"normal":var h=this[a];if(h instanceof W)if(h.isTexture()){var r=h.texture,n=this.effect.sampler[r];if(void 0!==n&&void 0!==n.source){var o=this.effect.surface[n.source];if(void 0!==o){var c=Gs[o.init_from];if(c){var l,d=Ls+c.init_from,u=THREE.Loader.Handlers.get(d);null!==u?l=u.load(d):(l=new THREE.Texture,Ts(l,d)),l.wrapS=h.texOpts.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,l.wrapT=h.texOpts.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,l.offset.x=h.texOpts.offsetU,l.offset.y=h.texOpts.offsetV,l.repeat.x=h.texOpts.repeatU,l.repeat.y=h.texOpts.repeatV,t[i[a]]=l,"emission"===a&&(t.emissive=16777215)}}}}else"diffuse"!==a&&s||("emission"===a?t.emissive=h.color.getHex():t[a]=h.color.getHex());break;case"shininess":t[a]=this[a];break;case"reflectivity":t[a]=this[a],t[a]>0&&(t.envMap=te.defaultEnvMap),t.combine=THREE.MixOperation;break;case"index_of_refraction":t.refractionRatio=this[a],1!==this[a]&&(t.envMap=te.defaultEnvMap);break;case"transparency":}switch(t.shading=Ks,t.side=this.effect.doubleSided?THREE.DoubleSide:THREE.FrontSide,this.type){case"constant":void 0!=t.emissive&&(t.color=t.emissive),this.material=new THREE.MeshBasicMaterial(t);break;case"phong":case"blinn":void 0!=t.diffuse&&(t.color=t.diffuse),this.material=new THREE.MeshPhongMaterial(t);break;case"lambert":default:void 0!=t.diffuse&&(t.color=t.diffuse),this.material=new THREE.MeshLambertMaterial(t)}return this.material},ts.prototype.parse=function(t){for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"init_from":this.init_from=e.textContent;break;case"format":this.format=e.textContent;break;default:console.log("unhandled Surface prop: "+e.nodeName)}}return this},ss.prototype.parse=function(t){for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"source":this.source=e.textContent;break;case"minfilter":this.minfilter=e.textContent;break;case"magfilter":this.magfilter=e.textContent;break;case"mipfilter":this.mipfilter=e.textContent;break;case"wrap_s":this.wrap_s=e.textContent;break;case"wrap_t":this.wrap_t=e.textContent;break;default:console.log("unhandled Sampler2D prop: "+e.nodeName)}}return this},es.prototype.create=function(){return null===this.shader?null:void 0},es.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),Es(this,t),this.shader=null;for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"profile_COMMON":this.parseTechnique(this.parseProfileCOMMON(e))}}return this},es.prototype.parseNewparam=function(t){for(var s=t.getAttribute("sid"),e=0;e<t.childNodes.length;e++){var i=t.childNodes[e];if(1==i.nodeType)switch(i.nodeName){case"surface":this.surface[s]=new ts(this).parse(i);break;case"sampler2D":this.sampler[s]=new ss(this).parse(i);break;case"extra":break;default:console.log(i.nodeName)}}},es.prototype.parseProfileCOMMON=function(t){for(var s,e=0;e<t.childNodes.length;e++){var i=t.childNodes[e];
if(1==i.nodeType)switch(i.nodeName){case"profile_COMMON":this.parseProfileCOMMON(i);break;case"technique":s=i;break;case"newparam":this.parseNewparam(i);break;case"image":var a=(new _).parse(i);Gs[a.id]=a;break;case"extra":break;default:console.log(i.nodeName)}}return s},es.prototype.parseTechnique=function(t){for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"constant":case"lambert":case"blinn":case"phong":this.shader=new K(e.nodeName,this).parse(e);break;case"extra":this.parseExtra(e)}}},es.prototype.parseExtra=function(t){for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"technique":this.parseExtraTechnique(e)}}},es.prototype.parseExtraTechnique=function(t){for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"bump":this.shader.parse(t)}}},is.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},as.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.source={};for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"animation":var i=(new as).parse(e);for(var a in i.source)this.source[a]=i.source[a];for(var h=0;h<i.channel.length;h++)this.channel.push(i.channel[h]),this.sampler.push(i.sampler[h]);break;case"source":var a=(new Q).parse(e);this.source[a.id]=a;break;case"sampler":this.sampler.push(new rs(this).parse(e));break;case"channel":this.channel.push(new hs(this).parse(e))}}return this},hs.prototype.parse=function(t){this.source=t.getAttribute("source").replace(/^#/,""),this.target=t.getAttribute("target");var s=this.target.split("/"),e=(s.shift(),s.shift()),i=e.indexOf(".")>=0,a=e.indexOf("(")>=0;if(i)s=e.split("."),this.sid=s.shift(),this.member=s.shift();else if(a){var h=e.split("(");this.sid=h.shift();for(var r=0;r<h.length;r++)h[r]=parseInt(h[r].replace(/\)/,""));this.arrIndices=h}else this.sid=e;return this.fullSid=e,this.dotSyntax=i,this.arrSyntax=a,this},rs.prototype.parse=function(t){this.id=t.getAttribute("id"),this.inputs=[];for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"input":this.inputs.push((new $).parse(e))}}return this},rs.prototype.create=function(){for(var t=0;t<this.inputs.length;t++){var s=this.inputs[t],e=this.animation.source[s.source];switch(s.semantic){case"INPUT":this.input=e.read();break;case"OUTPUT":this.output=e.read(),this.strideOut=e.accessor.stride;break;case"INTERPOLATION":this.interpolation=e.read();break;case"IN_TANGENT":break;case"OUT_TANGENT":break;default:console.log(s.semantic)}}if(this.startTime=0,this.endTime=0,this.duration=0,this.input.length){this.startTime=1e8,this.endTime=-1e8;for(var t=0;t<this.input.length;t++)this.startTime=Math.min(this.startTime,this.input[t]),this.endTime=Math.max(this.endTime,this.input[t]);this.duration=this.endTime-this.startTime}},rs.prototype.getData=function(t,s,e){var i;if("matrix"===t&&16===this.strideOut)i=this.output[s];else if(this.strideOut>1){i=[],s*=this.strideOut;for(var a=0;a<this.strideOut;++a)i[a]=this.output[s+a];if(3===this.strideOut)switch(t){case"rotate":case"translate":Ms(i,-1);break;case"scale":Ms(i,1)}else 4===this.strideOut&&"matrix"===t&&Ms(i,-1)}else i=this.output[s],e&&"translate"===t&&(i=As(e,i));return i},ns.prototype.addTarget=function(t,s,e,i){this.targets.push({sid:t,member:e,transform:s,data:i})},ns.prototype.apply=function(t){for(var s=0;s<this.targets.length;++s){var e=this.targets[s];t&&e.sid!==t||e.transform.update(e.data,e.member)}},ns.prototype.getTarget=function(t){for(var s=0;s<this.targets.length;++s)if(this.targets[s].sid===t)return this.targets[s];return null},ns.prototype.hasTarget=function(t){for(var s=0;s<this.targets.length;++s)if(this.targets[s].sid===t)return!0;return!1},ns.prototype.interpolate=function(t,s){for(var e=0,i=this.targets.length;i>e;e++){var a,h=this.targets[e],r=t.getTarget(h.sid);if("matrix"!==h.transform.type&&r){var n=(s-this.time)/(t.time-this.time),o=r.data,c=h.data;if(0>n&&(n=0),n>1&&(n=1),c.length){a=[];for(var l=0;l<c.length;++l)a[l]=c[l]+(o[l]-c[l])*n}else a=c+(o-c)*n}else a=h.data;h.transform.update(a,h.member)}},os.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"optics":this.parseOptics(e)}}return this},os.prototype.parseOptics=function(t){for(var s=0;s<t.childNodes.length;s++)if("technique_common"===t.childNodes[s].nodeName)for(var e=t.childNodes[s],i=0;i<e.childNodes.length;i++)if(this.technique=e.childNodes[i].nodeName,"perspective"===this.technique)for(var a=e.childNodes[i],h=0;h<a.childNodes.length;h++){var r=a.childNodes[h];switch(r.nodeName){case"yfov":this.yfov=r.textContent;break;case"xfov":this.xfov=r.textContent;break;case"znear":this.znear=r.textContent;break;case"zfar":this.zfar=r.textContent;break;case"aspect_ratio":this.aspect_ratio=r.textContent}}else if("orthographic"===this.technique)for(var n=e.childNodes[i],h=0;h<n.childNodes.length;h++){var r=n.childNodes[h];switch(r.nodeName){case"xmag":this.xmag=r.textContent;break;case"ymag":this.ymag=r.textContent;break;case"znear":this.znear=r.textContent;break;case"zfar":this.zfar=r.textContent;break;case"aspect_ratio":this.aspect_ratio=r.textContent}}return this},cs.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},ls.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"technique_common":this.parseCommon(e);break;case"technique":this.parseTechnique(e)}}return this},ls.prototype.parseCommon=function(t){for(var s=0;s<t.childNodes.length;s++)switch(t.childNodes[s].nodeName){case"directional":case"point":case"spot":case"ambient":this.technique=t.childNodes[s].nodeName;for(var e=t.childNodes[s],i=0;i<e.childNodes.length;i++){var a=e.childNodes[i];switch(a.nodeName){case"color":var h=ys(a.textContent);this.color=new THREE.Color(0),this.color.setRGB(h[0],h[1],h[2]),this.color.a=h[3];break;case"falloff_angle":this.falloff_angle=parseFloat(a.textContent);break;case"quadratic_attenuation":var r=parseFloat(a.textContent);this.distance=r?Math.sqrt(1/r):0}}}return this},ls.prototype.parseTechnique=function(t){this.profile=t.getAttribute("profile");for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];switch(e.nodeName){case"intensity":this.intensity=parseFloat(e.textContent)}}return this},ds.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},us.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.joints=[],this.links=[];for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"technique_common":this.parseCommon(e)}}return this},us.prototype.parseCommon=function(t){for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(t.childNodes[s].nodeName){case"joint":this.joints.push((new ps).parse(e));break;case"link":this.links.push((new fs).parse(e))}}return this},ps.prototype.parse=function(t){this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.axis=new THREE.Vector3,this.limits={min:0,max:0},this.type="",this["static"]=!1,this.zeroPosition=0,this.middlePosition=0;var s=t.querySelector("axis"),e=ys(s.textContent);this.axis=Rs(e,0);var i=t.querySelector("limits min")?parseFloat(t.querySelector("limits min").textContent):-360,a=t.querySelector("limits max")?parseFloat(t.querySelector("limits max").textContent):360;this.limits={min:i,max:a};for(var h=["prismatic","revolute"],r=0;r<h.length;r++){var n=h[r],o=t.querySelector(n);o&&(this.type=n)}return this.limits.min>=this.limits.max&&(this["static"]=!0),this.middlePosition=(this.limits.min+this.limits.max)/2,this},fs.prototype.parse=function(t){this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.transforms=[],this.attachments=[];for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"attachment_full":this.attachments.push((new ms).parse(e));break;case"rotate":case"translate":case"matrix":this.transforms.push((new q).parse(e))}}return this},ms.prototype.parse=function(t){this.joint=t.getAttribute("joint").split("/").pop(),this.links=[];for(var s=0;s<t.childNodes.length;s++){var e=t.childNodes[s];if(1==e.nodeType)switch(e.nodeName){case"link":this.links.push((new fs).parse(e));break;case"rotate":case"translate":case"matrix":this.transforms.push((new q).parse(e))}}return this},{load:t,parse:e,setPreferredShading:i,applySkin:y,geometries:Bs,options:te}};